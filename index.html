<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>JELLYCSTORE</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#06060a;--bg2:#09090e;--s:#0d0d16;--c:#11111c;--c2:#161624;
  --b:rgba(255,255,255,0.06);--b2:rgba(255,255,255,0.11);
  --gold:#f0b429;--gold2:#ffe08a;--green:#22c55e;--blue:#38bdf8;
  --red:#ef4444;--purple:#a855f7;--pink:#ec4899;
  --t:#eeeef8;--t2:#b8b8d0;--m:#5a5a78;--m2:#8888aa;
  --fh:'Outfit',sans-serif;--fm:'JetBrains Mono',monospace;
  --r:14px;--r2:8px;--r3:5px;
  --ease:cubic-bezier(0.16,1,0.3,1);--spring:cubic-bezier(0.34,1.56,0.64,1);
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;background:var(--bg);color:var(--t);font-family:var(--fh);overflow:hidden;}
::-webkit-scrollbar{width:3px;}::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.08);border-radius:2px;}
button,input,textarea{font-family:var(--fh);cursor:pointer;}
input,textarea{cursor:text;}a{text-decoration:none;color:inherit;}
#particles{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden;}
.particle{position:absolute;border-radius:50%;animation:fp linear infinite;}
@keyframes fp{0%{transform:translateY(100vh);opacity:0}5%{opacity:1}90%{opacity:0.4}100%{transform:translateY(-10vh);opacity:0}}
.orb{position:fixed;border-radius:50%;pointer-events:none;z-index:0;filter:blur(100px);}
.o1{width:600px;height:600px;background:radial-gradient(circle,rgba(240,180,41,0.05),transparent);top:-200px;left:5%;animation:oa 16s ease-in-out infinite;}
.o2{width:450px;height:450px;background:radial-gradient(circle,rgba(56,189,248,0.04),transparent);bottom:-100px;right:10%;animation:ob 20s ease-in-out infinite;}
@keyframes oa{0%,100%{transform:translate(0,0)}50%{transform:translate(40px,30px)}}
@keyframes ob{0%,100%{transform:translate(0,0)}50%{transform:translate(-50px,-30px)}}
.app{display:flex;height:100vh;width:100vw;position:relative;z-index:1;}
.store{flex:1;overflow-y:auto;min-width:0;}
.admin-panel{position:fixed;top:0;right:0;width:400px;height:100vh;background:var(--bg2);border-left:1px solid var(--b);display:flex;flex-direction:column;overflow:hidden;z-index:2000;transform:translateX(100%);transition:transform 0.42s var(--ease);box-shadow:-20px 0 60px rgba(0,0,0,0.7);}
.admin-panel.open{transform:translateX(0);}
.three-dot-btn{position:fixed;bottom:22px;right:22px;z-index:1500;width:44px;height:44px;border-radius:50%;background:rgba(13,13,22,0.85);border:1px solid rgba(255,255,255,0.07);color:rgba(255,255,255,0.25);font-size:1.3rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.22s;backdrop-filter:blur(20px);}
.three-dot-btn:hover{border-color:rgba(255,255,255,0.15);color:rgba(255,255,255,0.5);}
.admin-overlay{position:fixed;inset:0;z-index:1999;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);display:none;opacity:0;transition:opacity 0.35s;}
.admin-overlay.on{opacity:1;}
.snav{display:flex;align-items:center;justify-content:space-between;padding:14px 28px;background:rgba(6,6,10,0.85);backdrop-filter:blur(40px);border-bottom:1px solid var(--b);position:sticky;top:0;z-index:100;}
.snav::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(240,180,41,0.15),transparent);}
.nav-logo{display:flex;align-items:center;gap:10px;}
.gem{width:22px;height:22px;background:linear-gradient(135deg,var(--gold),var(--gold2));clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);animation:spin 8s linear infinite;box-shadow:0 0 12px rgba(240,180,41,0.4);}
@keyframes spin{to{transform:rotate(360deg)}}
.logo-t{font-size:1rem;font-weight:800;}
.logo-t span{color:var(--gold);}
.nav-r{display:flex;align-items:center;gap:10px;}
.live-b{display:flex;align-items:center;gap:5px;font-family:var(--fm);font-size:0.48rem;color:var(--m2);letter-spacing:1.5px;}
.ldot{width:5px;height:5px;border-radius:50%;background:var(--green);animation:blink 2s infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.2}}
.vtag{font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--green);padding:3px 9px;border:1px solid rgba(34,197,94,0.22);background:rgba(34,197,94,0.05);border-radius:var(--r3);}
.nav-uid{display:flex;align-items:center;gap:5px;font-family:var(--fm);font-size:0.48rem;color:var(--purple);padding:3px 9px;border:1px solid rgba(168,85,247,0.25);background:rgba(168,85,247,0.07);border-radius:var(--r3);}
.hero{padding:44px 28px 28px;}
.hero-eyebrow{display:inline-flex;align-items:center;gap:7px;font-family:var(--fm);font-size:0.5rem;letter-spacing:3px;color:var(--gold);text-transform:uppercase;padding:5px 13px;border:1px solid rgba(240,180,41,0.2);background:rgba(240,180,41,0.05);border-radius:var(--r3);margin-bottom:16px;animation:fu 0.8s var(--ease) 0.1s backwards;}
@keyframes fu{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:none}}
.hero-title{font-size:clamp(1.9rem,3.8vw,3rem);font-weight:900;line-height:1.05;margin-bottom:12px;background:linear-gradient(160deg,#fff 20%,rgba(255,255,255,0.7) 60%,rgba(240,180,41,0.5) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:fu 0.8s var(--ease) 0.2s backwards;}
.hero-sub{color:var(--m2);font-size:0.78rem;line-height:1.9;font-weight:300;max-width:420px;margin-bottom:22px;animation:fu 0.8s var(--ease) 0.3s backwards;}
.hero-stats{display:flex;gap:20px;}
.hstat-v{font-size:1.3rem;font-weight:800;color:var(--gold);}
.hstat-l{font-family:var(--fm);font-size:0.45rem;letter-spacing:2.5px;color:var(--m2);text-transform:uppercase;margin-top:1px;}
.products-wrap{padding:0 28px 40px;}
.sec-hd{display:flex;align-items:center;gap:12px;margin-bottom:20px;}
.sec-hd-l{font-family:var(--fm);font-size:0.48rem;letter-spacing:4px;color:var(--m2);text-transform:uppercase;white-space:nowrap;}
.sec-hd-line{height:1px;flex:1;background:linear-gradient(90deg,var(--b),transparent);}
.pcard{background:var(--c);border:1px solid var(--b);border-radius:var(--r);overflow:hidden;margin-bottom:20px;transition:all 0.4s var(--ease);animation:ca 0.7s var(--ease) backwards;}
@keyframes ca{from{opacity:0;transform:translateY(32px)}to{opacity:1;transform:none}}
.pcard:hover{border-color:rgba(240,180,41,0.2);box-shadow:0 32px 80px rgba(0,0,0,0.6);transform:translateY(-6px);}
.pc-img{position:relative;background:var(--s);min-height:200px;overflow:hidden;display:flex;align-items:center;justify-content:center;}
.pc-img img{width:100%;object-fit:cover;display:block;transition:transform 0.7s var(--ease);}
.pcard:hover .pc-img img{transform:scale(1.06);}
.pc-img-ph{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--m2);gap:8px;}
.ph-ico{font-size:2.8rem;opacity:0.15;}
.img-grd{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 30%,rgba(6,6,10,0.98) 100%);}
.img-price{position:absolute;bottom:13px;left:13px;background:rgba(6,6,10,0.9);border:1px solid rgba(240,180,41,0.25);backdrop-filter:blur(20px);border-radius:var(--r2);padding:6px 14px;}
.ip-v{font-size:1.4rem;font-weight:900;color:var(--gold);line-height:1;}
.ip-l{font-family:var(--fm);font-size:0.42rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-top:1px;}
.img-bdgs{position:absolute;top:11px;right:11px;display:flex;flex-direction:column;gap:5px;align-items:flex-end;}
.bdg{font-family:var(--fm);font-size:0.43rem;letter-spacing:2px;text-transform:uppercase;padding:3px 8px;border-radius:var(--r3);backdrop-filter:blur(10px);}
.bdg-g{background:rgba(34,197,94,0.14);color:var(--green);border:1px solid rgba(34,197,94,0.3);}
.bdg-p{background:rgba(168,85,247,0.14);color:var(--purple);border:1px solid rgba(168,85,247,0.3);}
.pc-body{padding:20px 22px 22px;}
.pc-cat{font-family:var(--fm);font-size:0.46rem;letter-spacing:3px;color:var(--m2);text-transform:uppercase;margin-bottom:6px;display:flex;align-items:center;gap:8px;}
.pc-cat::before{content:'';width:14px;height:1px;background:linear-gradient(90deg,var(--gold),transparent);}
.pc-title{font-size:1.35rem;font-weight:800;line-height:1.1;margin-bottom:10px;}
.pcard:hover .pc-title{color:var(--gold2);}
.pc-summary{color:var(--m2);font-size:0.76rem;line-height:1.9;font-weight:300;margin-bottom:16px;}
.pc-chips{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:16px;}
.chip{font-family:var(--fm);font-size:0.52rem;color:var(--m2);padding:3px 9px;background:var(--s);border:1px solid var(--b);border-radius:var(--r3);}
.pc-items{margin-bottom:16px;}
.items-lbl{font-family:var(--fm);font-size:0.46rem;letter-spacing:2.5px;color:var(--m);text-transform:uppercase;margin-bottom:6px;}
.item-row{display:flex;align-items:center;gap:7px;padding:7px 11px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:4px;}
.ir-ico{font-size:0.9rem;}
.ir-name{font-family:var(--fm);font-size:0.6rem;color:var(--m2);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ir-type{font-family:var(--fm);font-size:0.42rem;color:var(--m);padding:2px 5px;background:var(--c2);border-radius:2px;text-transform:uppercase;}
.pc-cta{display:flex;gap:8px;flex-wrap:wrap;}
.btn-buy{flex:1;min-width:110px;background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;font-family:var(--fm);font-size:0.62rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:13px 18px;border:none;border-radius:var(--r2);transition:all 0.25s var(--spring);}
.btn-buy:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(240,180,41,0.45);}
.btn-tg-s{background:rgba(56,189,248,0.07);color:var(--blue);border:1px solid rgba(56,189,248,0.18);font-family:var(--fm);font-size:0.6rem;letter-spacing:1px;text-transform:uppercase;padding:13px 15px;border-radius:var(--r2);transition:all 0.25s;display:inline-flex;align-items:center;gap:6px;}
.btn-tg-s:hover{background:rgba(56,189,248,0.15);border-color:rgba(56,189,248,0.42);transform:translateY(-3px);}
.contact-section{padding:16px 28px 80px;}
.contact-card{background:var(--c);border:1px solid var(--b);border-radius:var(--r);padding:24px 26px;position:relative;overflow:hidden;}
.contact-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--gold),var(--purple),var(--blue));opacity:0.5;}
.contact-title{font-size:0.9rem;font-weight:700;margin-bottom:4px;}
.contact-sub{color:var(--m2);font-size:0.7rem;font-weight:300;line-height:1.8;margin-bottom:20px;}
.contact-links{display:flex;gap:10px;flex-wrap:wrap;}
.c-link{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:var(--r2);font-family:var(--fm);font-size:0.56rem;letter-spacing:1px;text-transform:uppercase;font-weight:600;transition:all 0.25s;border:1px solid transparent;}
.c-link:hover{transform:translateY(-3px);}
.c-link.tiktok{background:rgba(255,255,255,0.06);color:var(--t);border-color:rgba(255,255,255,0.1);}
.c-link.telegram{background:rgba(56,189,248,0.08);color:var(--blue);border-color:rgba(56,189,248,0.2);}
.c-link.instagram{background:rgba(236,72,153,0.08);color:var(--pink);border-color:rgba(236,72,153,0.2);}
.empty{text-align:center;padding:70px 20px;}
.empty-ico{font-size:3rem;opacity:0.14;margin-bottom:13px;}
.empty-t{font-size:1rem;font-weight:600;color:var(--m2);margin-bottom:5px;}
.empty-s{font-size:0.7rem;color:var(--m2);opacity:0.45;line-height:1.9;}
/* ADMIN */
.admin-lock{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:36px 26px;text-align:center;}
.lock-orb{width:66px;height:66px;border-radius:50%;background:linear-gradient(135deg,var(--c2),var(--s));border:1px solid var(--b2);display:flex;align-items:center;justify-content:center;font-size:1.7rem;margin-bottom:18px;}
.lock-title{font-size:1.05rem;font-weight:700;margin-bottom:6px;}
.lock-sub{color:var(--m2);font-size:0.7rem;line-height:1.9;font-weight:300;margin-bottom:24px;}
.lock-div{width:100%;height:1px;background:linear-gradient(90deg,transparent,var(--b2),transparent);margin-bottom:24px;}
.fg{margin-bottom:10px;text-align:left;}
.fg label,.flbl{display:block;font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-bottom:5px;}
.fg input,.fg textarea{width:100%;background:var(--c);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.72rem;padding:10px 12px;outline:none;transition:all 0.2s;border-radius:var(--r2);}
.fg textarea{resize:vertical;min-height:68px;line-height:1.7;}
.fg input:focus,.fg textarea:focus{border-color:rgba(240,180,41,0.4);background:var(--c2);}
.btm{width:100%;font-family:var(--fm);font-size:0.6rem;font-weight:600;letter-spacing:2px;text-transform:uppercase;padding:11px;border:none;border-radius:var(--r2);transition:all 0.22s;margin-top:5px;}
.btm.gold{background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;}
.btm.gold:hover{box-shadow:0 6px 22px rgba(240,180,41,0.32);transform:translateY(-1px);}
.btm.ghost{background:transparent;color:var(--m2);border:1px solid var(--b);}
.btm.ghost:hover{border-color:var(--b2);color:var(--t);}
.btm.red{background:rgba(239,68,68,0.08);color:var(--red);border:1px solid rgba(239,68,68,0.17);}
.btm.red:hover{background:rgba(239,68,68,0.16);}
.btm:disabled{opacity:0.35;pointer-events:none;}
.emsg{color:var(--red);font-family:var(--fm);font-size:0.55rem;margin-top:5px;display:none;line-height:1.7;}
.emsg.on{display:block;}
.smsg{color:var(--green);font-family:var(--fm);font-size:0.55rem;margin-top:5px;display:none;}
.smsg.on{display:block;}
.adash{display:none;flex-direction:column;height:100%;}
.adash.on{display:flex;}
.dash-head{padding:12px 14px;border-bottom:1px solid var(--b);background:var(--s);flex-shrink:0;}
.dash-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.dash-logo{display:flex;align-items:center;gap:7px;font-size:0.8rem;font-weight:800;letter-spacing:1px;}
.d-gem{width:9px;height:9px;background:var(--gold);clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);animation:spin 6s linear infinite;}
.dash-logo span{color:var(--red);}
.dash-top-btns{display:flex;gap:6px;}
.btn-lo{background:none;border:1px solid var(--b);color:var(--m2);font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;padding:4px 10px;border-radius:var(--r3);transition:all 0.2s;}
.btn-lo:hover{border-color:rgba(239,68,68,0.4);color:var(--red);}
.btn-cp{background:none;border:1px solid var(--b);color:var(--m2);font-size:0.8rem;width:26px;height:26px;border-radius:var(--r3);display:flex;align-items:center;justify-content:center;transition:all 0.2s;}
.btn-cp:hover{border-color:var(--b2);color:var(--t);}
.stats-g{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;}
.sbox{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);padding:8px;text-align:center;}
.sb-l{font-family:var(--fm);font-size:0.38rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-bottom:2px;}
.sb-v{font-size:1.35rem;font-weight:800;color:var(--green);}
.sb-v.g{color:var(--gold);}.sb-v.b{color:var(--blue);}
.tabs{display:flex;border-bottom:1px solid var(--b);flex-shrink:0;background:var(--s);}
.tbtn{flex:1;padding:10px 4px;font-family:var(--fm);font-size:0.46rem;letter-spacing:1px;text-transform:uppercase;color:var(--m2);border:none;background:none;border-bottom:2px solid transparent;transition:all 0.22s;}
.tbtn.on{color:var(--gold);border-bottom-color:var(--gold);}
.tpane{flex:1;overflow-y:auto;display:none;padding:11px;}
.tpane.on{display:block;}
.obar{display:flex;gap:6px;margin-bottom:9px;}
.bsm{background:none;border:1px solid var(--b);color:var(--m2);font-family:var(--fm);font-size:0.46rem;letter-spacing:1px;text-transform:uppercase;padding:7px;border-radius:var(--r2);transition:all 0.2s;flex:1;}
.bsm:hover{border-color:var(--b2);color:var(--t);}
.bsm.dr:hover{border-color:rgba(239,68,68,0.4);color:var(--red);}
.ocard{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:7px;padding:12px;transition:all 0.22s;}
.ocard:hover{border-color:var(--b2);}
.ocard.pending{border-left:3px solid var(--gold);}
.ocard.accepted{border-left:3px solid var(--green);}
.o-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px;}
.o-num{font-family:var(--fm);font-size:0.42rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;}
.opill{font-family:var(--fm);font-size:0.42rem;letter-spacing:1px;text-transform:uppercase;padding:2px 7px;border-radius:2px;}
.pill-p{background:rgba(240,180,41,0.1);color:var(--gold);border:1px solid rgba(240,180,41,0.22);}
.pill-a{background:rgba(34,197,94,0.1);color:var(--green);border:1px solid rgba(34,197,94,0.22);}
.o-user{font-size:0.78rem;font-weight:700;margin-bottom:2px;}
.o-uid{font-family:var(--fm);font-size:0.5rem;color:var(--purple);margin-bottom:4px;}
.uid-b{background:rgba(168,85,247,0.1);border:1px solid rgba(168,85,247,0.22);padding:1px 7px;border-radius:2px;}
.o-meta{font-family:var(--fm);font-size:0.46rem;color:var(--m2);margin-bottom:3px;}
.o-acts{display:flex;gap:5px;flex-wrap:wrap;margin-top:8px;}
.btn-acc{flex:1;background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;border:none;font-family:var(--fm);font-size:0.5rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:7px 8px;border-radius:var(--r2);transition:all 0.22s;}
.btn-acc:hover:not(:disabled){box-shadow:0 5px 16px rgba(240,180,41,0.36);transform:translateY(-1px);}
.btn-acc.acc{background:rgba(34,197,94,0.1);color:var(--green);border:1px solid rgba(34,197,94,0.22);pointer-events:none;}
.btn-del{background:none;border:1px solid var(--b);color:var(--m2);font-size:0.66rem;width:28px;height:28px;border-radius:var(--r2);display:inline-flex;align-items:center;justify-content:center;transition:all 0.2s;}
.btn-del:hover{border-color:rgba(239,68,68,0.4);color:var(--red);}
.no-ord{text-align:center;padding:32px 10px;color:var(--m2);font-family:var(--fm);font-size:0.56rem;line-height:2;}
.pm-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:9px;}
.pm-t{font-size:0.68rem;font-weight:700;}
.btn-ap{background:rgba(240,180,41,0.08);color:var(--gold);border:1px solid rgba(240,180,41,0.2);font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;text-transform:uppercase;padding:5px 11px;border-radius:var(--r3);transition:all 0.2s;}
.btn-ap:hover{background:rgba(240,180,41,0.16);}
.pm-item{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);padding:10px 11px;margin-bottom:6px;display:flex;align-items:center;gap:9px;transition:all 0.2s;}
.pm-thumb{width:42px;height:42px;border-radius:var(--r2);background:var(--s);border:1px solid var(--b);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:1.1rem;overflow:hidden;}
.pm-thumb img{width:100%;height:100%;object-fit:cover;}
.pm-info{flex:1;min-width:0;}
.pm-name{font-size:0.74rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px;}
.pm-meta{font-family:var(--fm);font-size:0.48rem;color:var(--m2);}
.pm-price{color:var(--gold);}
.pm-acts{display:flex;gap:4px;}
.af{background:var(--c);border:1px solid var(--b);border-radius:var(--r);padding:14px;margin-top:8px;animation:fu 0.3s var(--ease);}
.af-hd{font-size:0.74rem;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:7px;}
.af-hd::before{content:'';width:6px;height:6px;background:var(--gold);border-radius:1px;transform:rotate(45deg);}
.imdrop{width:100%;height:115px;background:var(--s);border:2px dashed var(--b);border-radius:var(--r2);display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--m2);transition:all 0.25s;position:relative;overflow:hidden;margin-bottom:8px;cursor:pointer;}
.imdrop:hover{border-color:rgba(240,180,41,0.35);}
.imdrop img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;}
.id-ico{font-size:1.7rem;opacity:0.22;margin-bottom:4px;}
.id-l{font-family:var(--fm);font-size:0.46rem;letter-spacing:2px;text-transform:uppercase;opacity:0.35;}
.hin{position:absolute;inset:0;opacity:0;width:100%;height:100%;}
.ci-list{margin-bottom:8px;}
.ci-item{display:flex;align-items:center;gap:7px;padding:7px 9px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:4px;}
.ci-name{font-family:var(--fm);font-size:0.58rem;color:var(--m2);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ci-type{font-family:var(--fm);font-size:0.42rem;color:var(--m);padding:2px 5px;background:var(--c2);border-radius:2px;text-transform:uppercase;}
.ci-del{background:none;border:none;color:var(--m2);font-size:0.7rem;padding:0 4px;transition:all 0.15s;}
.ci-del:hover{color:var(--red);}
.add-ci-btn{width:100%;background:none;border:1px dashed var(--b);color:var(--m2);font-family:var(--fm);font-size:0.52rem;letter-spacing:1px;text-transform:uppercase;padding:8px;border-radius:var(--r2);transition:all 0.2s;margin-bottom:8px;position:relative;overflow:hidden;}
.text-editor{width:100%;min-height:90px;background:var(--s);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.68rem;padding:10px 12px;outline:none;resize:vertical;border-radius:var(--r2);line-height:1.7;transition:all 0.2s;}
.text-editor:focus{border-color:rgba(240,180,41,0.4);}
.text-name-inp{width:100%;background:var(--c);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.66rem;padding:8px 11px;outline:none;border-radius:var(--r2);transition:all 0.2s;margin-bottom:5px;}
.add-text-btn{width:100%;background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.2);color:var(--purple);font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;text-transform:uppercase;padding:8px;border-radius:var(--r2);transition:all 0.2s;margin-bottom:8px;}
.dz{background:rgba(239,68,68,0.04);border:1px solid rgba(239,68,68,0.13);border-radius:var(--r2);padding:11px;margin-top:10px;}
.dz-t{font-family:var(--fm);font-size:0.46rem;letter-spacing:2px;color:var(--red);text-transform:uppercase;margin-bottom:8px;}
.sf{background:var(--c);border:1px solid var(--b);border-radius:var(--r);padding:13px;margin-bottom:11px;}
.sf-t{font-size:0.72rem;font-weight:700;margin-bottom:11px;display:flex;align-items:center;gap:6px;}
.sf-t::before{content:'';width:6px;height:6px;background:var(--gold);border-radius:1px;transform:rotate(45deg);}
/* MODALS */
.modal{display:none;position:fixed;inset:0;z-index:3000;align-items:center;justify-content:center;padding:16px;}
.modal.on{display:flex;}
.mbg{position:absolute;inset:0;background:rgba(0,0,0,0.94);backdrop-filter:blur(22px);}
.mbox{position:relative;z-index:1;background:var(--c);border:1px solid var(--b2);border-radius:var(--r);width:100%;max-width:440px;max-height:92vh;overflow-y:auto;animation:mo 0.45s var(--spring);box-shadow:0 70px 160px rgba(0,0,0,0.8);}
@keyframes mo{from{opacity:0;transform:translateY(35px) scale(0.94)}to{opacity:1;transform:none}}
.mhead{padding:22px 22px 17px;border-bottom:1px solid var(--b);background:linear-gradient(135deg,var(--s),var(--c));position:relative;}
.mhead::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--gold),var(--gold2),var(--purple),var(--blue));border-radius:var(--r) var(--r) 0 0;}
.mclose{position:absolute;top:11px;right:12px;background:none;border:1px solid var(--b);color:var(--m2);width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.74rem;transition:all 0.22s;}
.mclose:hover{border-color:rgba(239,68,68,0.42);color:var(--red);transform:rotate(90deg);}
.mtitle{font-size:1.15rem;font-weight:800;margin-bottom:3px;}
.msub{color:var(--m2);font-size:0.66rem;line-height:1.8;font-weight:300;}
.m-pname{font-family:var(--fm);font-size:0.53rem;color:var(--gold);margin-top:4px;}
.mbody{padding:18px 22px;}
.steps{display:flex;gap:5px;margin-bottom:18px;}
.step{flex:1;text-align:center;font-family:var(--fm);font-size:0.46rem;letter-spacing:1px;text-transform:uppercase;padding:6px;border-radius:var(--r2);background:var(--s);color:var(--m2);border:1px solid var(--b);transition:all 0.25s;}
.step.on{color:var(--gold);border-color:rgba(240,180,41,0.3);background:rgba(240,180,41,0.06);}
.step.ok{color:var(--green);border-color:rgba(34,197,94,0.22);background:rgba(34,197,94,0.05);}
.osum{background:var(--s);border:1px solid var(--b);border-radius:var(--r2);padding:12px;margin-bottom:13px;}
.osum-row{display:flex;justify-content:space-between;margin-bottom:6px;font-size:0.68rem;}
.osum-row:last-child{margin:0;}
.osl{color:var(--m2);}
.pay-cards{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:13px 0 17px;}
.pay-card{background:var(--s);border:2px solid var(--b);border-radius:var(--r2);padding:15px 11px;text-align:center;transition:all 0.25s;cursor:pointer;position:relative;}
.pay-card.sel{border-color:var(--gold);background:rgba(240,180,41,0.06);}
.pc-ico{font-size:1.65rem;margin-bottom:6px;}
.pc-nm{font-size:0.76rem;font-weight:700;margin-bottom:2px;}
.pc-sb{font-family:var(--fm);font-size:0.46rem;color:var(--m2);}
.bin-box{background:rgba(240,180,41,0.04);border:1px solid rgba(240,180,41,0.2);border-radius:var(--r2);padding:13px;text-align:center;margin-bottom:13px;}
.bin-lbl{font-family:var(--fm);font-size:0.44rem;letter-spacing:3px;color:var(--gold);text-transform:uppercase;margin-bottom:5px;}
.bin-id{font-size:1.65rem;font-weight:900;color:var(--gold);letter-spacing:5px;margin-bottom:7px;}
.copy-btn{background:none;border:1px solid rgba(240,180,41,0.3);color:var(--gold);font-family:var(--fm);font-size:0.5rem;letter-spacing:1px;padding:5px 13px;border-radius:var(--r3);transition:all 0.2s;}
.copy-btn:hover{background:rgba(240,180,41,0.12);}
.tg-box{background:rgba(56,189,248,0.04);border:1px solid rgba(56,189,248,0.2);border-radius:var(--r2);padding:17px;text-align:center;margin-bottom:13px;}
.tg-ico{font-size:2rem;margin-bottom:7px;}
.tg-t{font-size:0.76rem;font-weight:700;margin-bottom:4px;}
.tg-s{color:var(--m2);font-size:0.66rem;line-height:1.8;margin-bottom:11px;font-weight:300;}
.btn-tgo{display:inline-flex;align-items:center;gap:6px;background:var(--blue);color:#06060a;font-family:var(--fm);font-size:0.6rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:10px 20px;border-radius:var(--r2);transition:all 0.22s;border:none;}
.btn-tgo:hover{background:#60cdff;transform:translateY(-2px);}
.uid-display{background:rgba(168,85,247,0.06);border:1px solid rgba(168,85,247,0.22);border-radius:var(--r2);padding:12px;text-align:center;margin-bottom:14px;}
.uid-lbl{font-family:var(--fm);font-size:0.44rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:5px;}
.uid-val{font-size:1.6rem;font-weight:900;color:var(--purple);letter-spacing:5px;}
.uid-sub{font-family:var(--fm);font-size:0.48rem;color:var(--m2);margin-top:4px;}
/* WAIT */
.wait-screen{position:fixed;inset:0;z-index:4000;background:rgba(0,0,0,0.96);backdrop-filter:blur(24px);display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px;}
.wait-screen.on{display:flex;}
.wait-orb{width:110px;height:110px;border-radius:50%;border:2px solid rgba(240,180,41,0.3);display:flex;align-items:center;justify-content:center;font-size:2.6rem;margin-bottom:26px;animation:wo 2s ease-in-out infinite;}
@keyframes wo{0%,100%{box-shadow:0 0 0 0 rgba(240,180,41,0.3)}50%{box-shadow:0 0 0 22px rgba(240,180,41,0)}}
.wait-title{font-size:1.45rem;font-weight:800;margin-bottom:8px;}
.wait-sub{color:var(--m2);font-size:0.76rem;line-height:1.9;font-weight:300;max-width:360px;margin-bottom:24px;}
.wait-uid-box{background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.24);border-radius:var(--r2);padding:10px 22px;margin-bottom:18px;}
.wait-uid-l{font-family:var(--fm);font-size:0.44rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:4px;}
.wait-uid-v{font-size:1.55rem;font-weight:900;color:var(--purple);letter-spacing:5px;}
.wait-dots{display:flex;gap:6px;justify-content:center;margin-bottom:12px;}
.wait-dot{width:8px;height:8px;border-radius:50%;background:var(--gold);animation:wd 1.4s ease-in-out infinite;}
.wait-dot:nth-child(2){animation-delay:0.2s;}.wait-dot:nth-child(3){animation-delay:0.4s;}
@keyframes wd{0%,80%,100%{transform:scale(0.6);opacity:0.4}40%{transform:scale(1.15);opacity:1}}
.wait-info{font-family:var(--fm);font-size:0.46rem;color:var(--m2);letter-spacing:1px;margin-top:6px;}
/* COMPLETE */
.complete-screen{position:fixed;inset:0;z-index:4500;display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px;background:rgba(0,0,0,0.97);backdrop-filter:blur(28px);}
.complete-screen.on{display:flex;}
.cs-particles{position:absolute;inset:0;overflow:hidden;pointer-events:none;}
.cs-p{position:absolute;animation:csp linear forwards;}
@keyframes csp{0%{transform:translateY(100vh) rotate(0deg);opacity:1}100%{transform:translateY(-20px) rotate(720deg);opacity:0}}
.cs-icon{font-size:4.5rem;margin-bottom:20px;animation:csb 0.75s var(--spring);}
@keyframes csb{0%{transform:scale(0.1);opacity:0}70%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
.cs-title{font-size:1.9rem;font-weight:900;color:var(--green);margin-bottom:10px;}
.cs-sub{color:var(--m2);font-size:0.8rem;line-height:2;font-weight:300;max-width:380px;margin-bottom:28px;}
.cs-btn{background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;font-family:var(--fm);font-size:0.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:16px 38px;border:none;border-radius:var(--r2);transition:all 0.25s var(--spring);}
.cs-btn:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 18px 45px rgba(240,180,41,0.5);}
/* EXPIRED */
.expired-screen{position:fixed;inset:0;z-index:5500;display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px;background:rgba(0,0,0,0.98);backdrop-filter:blur(30px);}
.expired-screen.on{display:flex;}
.exp-icon{font-size:4rem;margin-bottom:20px;}
.exp-title{font-size:1.7rem;font-weight:900;color:var(--red);margin-bottom:10px;}
.exp-sub{color:var(--m2);font-size:0.78rem;line-height:2;font-weight:300;max-width:360px;margin-bottom:26px;}
.exp-price{background:rgba(240,180,41,0.08);border:1px solid rgba(240,180,41,0.25);border-radius:var(--r2);padding:16px 28px;margin-bottom:24px;}
.exp-price-l{font-family:var(--fm);font-size:0.46rem;letter-spacing:3px;color:var(--gold);text-transform:uppercase;margin-bottom:5px;}
.exp-price-v{font-size:1.6rem;font-weight:900;color:var(--gold);}
.exp-btns{display:flex;gap:10px;}
.exp-buy{background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;font-family:var(--fm);font-size:0.66rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:13px 28px;border:none;border-radius:var(--r2);transition:all 0.25s;cursor:pointer;}
.exp-buy:hover{transform:translateY(-3px);}
.exp-tg{background:rgba(56,189,248,0.08);color:var(--blue);font-family:var(--fm);font-size:0.66rem;letter-spacing:1px;text-transform:uppercase;padding:13px 22px;border:1px solid rgba(56,189,248,0.2);border-radius:var(--r2);transition:all 0.25s;cursor:pointer;}
/* CONFIRM */
.conf{display:none;position:fixed;inset:0;z-index:5000;align-items:center;justify-content:center;padding:20px;}
.conf.on{display:flex;}
.conf-box{position:relative;z-index:1;background:var(--c2);border:1px solid var(--b2);border-radius:var(--r);padding:26px;width:100%;max-width:310px;text-align:center;animation:mo 0.35s var(--spring);}
.conf-ico{font-size:2.4rem;margin-bottom:10px;}
.conf-t{font-size:0.9rem;font-weight:700;margin-bottom:6px;}
.conf-s{color:var(--m2);font-size:0.68rem;line-height:1.8;margin-bottom:16px;font-weight:300;}
.conf-btns{display:flex;gap:7px;}
.conf-btns button{flex:1;font-family:var(--fm);font-size:0.56rem;letter-spacing:1px;text-transform:uppercase;padding:10px;border-radius:var(--r2);border:none;transition:all 0.2s;cursor:pointer;}
.cy{background:var(--red);color:#fff;}.cy:hover{background:#ff6060;}
.cn{background:var(--s);color:var(--m2);border:1px solid var(--b)!important;}
/* TOAST */
.toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%) translateY(70px);background:var(--c2);border:1px solid var(--b2);color:var(--t);font-family:var(--fm);font-size:0.6rem;padding:10px 22px;z-index:9999;transition:transform 0.38s var(--spring),opacity 0.35s;opacity:0;white-space:nowrap;pointer-events:none;border-radius:var(--r2);}
.toast.on{transform:translateX(-50%) translateY(0);opacity:1;}
.toast.ok{border-color:rgba(34,197,94,0.35);color:var(--green);}
.toast.bad{border-color:rgba(239,68,68,0.35);color:var(--red);}
.cursor-glow{position:fixed;width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(240,180,41,0.04),transparent 70%);pointer-events:none;z-index:0;transform:translate(-50%,-50%);transition:left 0.08s,top 0.08s;}
</style>
</head>
<body>
<div class="cursor-glow" id="cg"></div>
<div id="particles"></div>
<div class="orb o1"></div><div class="orb o2"></div>
<div class="app">
<div class="store">
  <nav class="snav">
    <div class="nav-logo"><div class="gem"></div><div class="logo-t" id="logo-text">Jelly<span>Store</span></div></div>
    <div class="nav-r">
      <div class="nav-uid">UID: <span id="nav-uid-val">‚Äî</span></div>
      <div class="live-b"><div class="ldot"></div>LIVE</div>
      <div class="vtag">VERIFIED</div>
    </div>
  </nav>
  <div class="hero">
    <div class="hero-eyebrow">‚ú¶ Premium Digital Products</div>
    <h1 class="hero-title">CODE. FILES.<br/>TOOLS. SECURED.</h1>
    <p class="hero-sub" id="s-sub">Professional digital products ‚Äî source code, firmware, templates & more.</p>
    <div class="hero-stats">
      <div class="hstat"><div class="hstat-v" id="stat-p">0</div><div class="hstat-l">Products</div></div>
      <div class="hstat"><div class="hstat-v" id="stat-o">0</div><div class="hstat-l">Orders</div></div>
      <div class="hstat"><div class="hstat-v">Fast</div><div class="hstat-l">Delivery</div></div>
    </div>
  </div>
  <div class="products-wrap">
    <div class="sec-hd"><div class="sec-hd-l">All Products</div><div class="sec-hd-line"></div></div>
    <div id="product-list"><div class="empty"><div class="empty-ico">‚è≥</div><div class="empty-t">Loading...</div></div></div>
  </div>
  <div class="contact-section">
    <div class="sec-hd" style="margin-bottom:14px"><div class="sec-hd-l">Contact Us</div><div class="sec-hd-line"></div></div>
    <div class="contact-card">
      <div class="contact-title">Get in Touch</div>
      <div class="contact-sub">Questions? Support? Reach out anytime.</div>
      <div class="contact-links">
        <a class="c-link tiktok" href="https://www.tiktok.com/@jellyofficer_" target="_blank"><span>üéµ</span>TikTok</a>
        <a class="c-link telegram" href="https://t.me/jellyofficer" target="_blank"><span>‚úàÔ∏è</span>Telegram</a>
        <a class="c-link instagram" href="https://www.instagram.com/jellyofficer" target="_blank"><span>üì∏</span>Instagram</a>
      </div>
    </div>
  </div>
</div>
<div class="admin-overlay" id="admin-overlay" onclick="closeAdmin()"></div>
<div class="admin-panel" id="admin-panel">
  <div class="admin-lock" id="admin-lock">
    <div class="lock-orb">üîê</div>
    <div class="lock-title">Admin Panel</div>
    <div class="lock-sub">Enter password to manage<br/>products and orders</div>
    <div class="lock-div"></div>
    <div class="fg" style="width:100%"><label>Password</label><input type="password" id="ap" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')doLogin()"/></div>
    <button class="btm gold" onclick="doLogin()">UNLOCK ‚Üí</button>
    <div class="emsg" id="lerr">Incorrect password.</div>
    <button class="btm ghost" style="margin-top:8px" onclick="closeAdmin()">Close</button>
  </div>
  <div class="adash" id="adash">
    <div class="dash-head">
      <div class="dash-top">
        <div class="dash-logo"><div class="d-gem"></div>ADMIN <span>PANEL</span></div>
        <div class="dash-top-btns">
          <button class="btn-lo" onclick="doLogout()">LOGOUT</button>
          <button class="btn-cp" onclick="closeAdmin()">‚úï</button>
        </div>
      </div>
      <div class="stats-g">
        <div class="sbox"><div class="sb-l">Products</div><div class="sb-v b" id="st-p">0</div></div>
        <div class="sbox"><div class="sb-l">Pending</div><div class="sb-v g" id="st-pg">0</div></div>
        <div class="sbox"><div class="sb-l">Accepted</div><div class="sb-v" id="st-a">0</div></div>
      </div>
    </div>
    <div class="tabs">
      <button class="tbtn on" onclick="stab('orders',this)">üìã Orders</button>
      <button class="tbtn" onclick="stab('products',this)">üì¶ Products</button>
      <button class="tbtn" onclick="stab('settings',this)">‚öô Settings</button>
    </div>
    <div class="tpane on" id="tab-orders">
      <div class="obar">
        <button class="bsm" onclick="loadOrders()">‚Üª Refresh</button>
        <button class="bsm dr" onclick="cdel('orders')">üóë Del All</button>
      </div>
      <div id="orders-list"><div class="no-ord">Loading...</div></div>
    </div>
    <div class="tpane" id="tab-products">
      <div class="pm-top"><div class="pm-t">Your Products</div><button class="btn-ap" onclick="toggleAF()">Ôºã Add New</button></div>
      <div id="pmgr-list"></div>
      <div class="af" id="addform" style="display:none">
        <div class="af-hd" id="af-title">Add New Product</div>
        <div class="fg"><label>Product Name *</label><input type="text" id="p-name" placeholder="e.g. ESP8266 Deauther"/></div>
        <div class="fg"><label>Category</label><input type="text" id="p-cat" placeholder="e.g. Firmware, Source Code"/></div>
        <div class="fg"><label>Price (USD) *</label><input type="number" id="p-price" placeholder="40" min="0" step="0.01"/></div>
        <div class="fg"><label>Description</label><textarea id="p-desc" placeholder="Describe the product..."></textarea></div>
        <div class="flbl" style="margin-bottom:5px">Product Image</div>
        <div class="imdrop" id="imdrop" onclick="document.getElementById('img-in').click()">
          <div class="id-ico">üñº</div><div class="id-l">Click to upload image</div>
          <input type="file" id="img-in" class="hin" accept="image/*" onchange="handleImg(this)"/>
        </div>
        <div style="margin-bottom:10px"><button class="btm ghost" id="clear-img" style="display:none;font-size:0.48rem;padding:6px;margin-top:0" onclick="clearImg()">‚úï Remove Image</button></div>
        <div class="flbl" style="margin-bottom:5px">Files / Code / Binary</div>
        <div class="ci-list" id="files-list"></div>
        <button class="add-ci-btn" onclick="document.getElementById('file-in').click()">Ôºã Add File<input type="file" id="file-in" class="hin" multiple onchange="handleFiles(this)"/></button>
        <div class="flbl" style="margin-bottom:5px">Text Content (keys / instructions)</div>
        <div class="ci-list" id="texts-list"></div>
        <div id="text-editor-wrap" style="display:none;margin-bottom:8px">
          <input class="text-name-inp" id="text-name-inp" placeholder="Label (e.g. License Key)"/>
          <textarea class="text-editor" id="text-inp" placeholder="Type content here..."></textarea>
          <div style="display:flex;gap:6px;margin-top:6px">
            <button class="btm gold" onclick="addText()" style="font-size:0.5rem;padding:8px">Ôºã Add</button>
            <button class="btm ghost" onclick="closeTE()" style="flex:0.6;font-size:0.5rem;padding:8px">Cancel</button>
          </div>
        </div>
        <button class="add-text-btn" id="open-text-btn" onclick="openTE()">‚úé Add Text / Code / Key</button>
        <div class="fg"><label>Tags (comma separated)</label><input type="text" id="p-chips" placeholder="v2.6.1, ESP8266"/></div>
        <div style="display:flex;gap:6px;margin-top:4px">
          <button class="btm gold" id="save-btn" onclick="saveProduct()">üíæ SAVE</button>
          <button class="btm ghost" onclick="cancelAF()" style="flex:0.6">Cancel</button>
        </div>
        <div class="emsg" id="p-err"></div><div class="smsg" id="p-ok"></div>
      </div>
    </div>
    <div class="tpane" id="tab-settings">
      <div class="sf">
        <div class="sf-t">Store Settings</div>
        <div class="fg"><label>Store Name</label><input type="text" id="s-name" placeholder="JellyStore"/></div>
        <div class="fg"><label>Hero Subtitle</label><input type="text" id="s-sub2" placeholder="Professional digital products..."/></div>
        <div class="fg"><label>Telegram Link</label><input type="text" id="s-tg" placeholder="https://t.me/jellyofficer"/></div>
        <div class="fg"><label>Binance Pay ID</label><input type="text" id="s-bin" placeholder="894307667"/></div>
        <button class="btm gold" onclick="saveSettings()">üíæ SAVE SETTINGS</button>
        <div class="smsg" id="s-ok"></div>
      </div>
      <div class="dz">
        <div class="dz-t">‚ö† Danger Zone</div>
        <button class="btm red" style="margin-bottom:6px" onclick="cdel('orders')">üóë Delete All Orders</button>
        <button class="btm red" onclick="cdel('products')">üóë Delete All Products</button>
      </div>
    </div>
  </div>
</div>
</div>
<button class="three-dot-btn" onclick="openAdmin()" title="Admin">‚ãØ</button>
<!-- PAY MODAL -->
<div class="modal" id="pay-modal">
  <div class="mbg" onclick="closePay()"></div>
  <div class="mbox">
    <div class="mhead">
      <button class="mclose" onclick="closePay()">‚úï</button>
      <div class="mtitle">Complete Order</div>
      <div class="msub">Choose payment method below</div>
      <div class="m-pname" id="m-pname"></div>
    </div>
    <div class="mbody">
      <div id="ms1">
        <div class="steps"><div class="step on">01 Method</div><div class="step">02 Pay</div><div class="step">03 Done</div></div>
        <div class="osum">
          <div class="osum-row"><span class="osl">Product</span><span id="m-prod">‚Äî</span></div>
          <div class="osum-row"><span class="osl">Price</span><span style="color:var(--gold);font-weight:700" id="m-price">‚Äî</span></div>
          <div class="osum-row"><span class="osl">Delivery</span><span>After admin approval</span></div>
        </div>
        <div class="uid-display">
          <div class="uid-lbl">Your Order UID</div>
          <div class="uid-val" id="m-uid">0000</div>
          <div class="uid-sub">Save this ‚Äî admin needs it to find your order</div>
        </div>
        <div class="pay-cards">
          <div class="pay-card sel" id="pc-bin" onclick="selPay('binance')"><div class="pc-ico">ü™ô</div><div class="pc-nm">Binance Pay</div><div class="pc-sb">Crypto payment</div></div>
          <div class="pay-card" id="pc-tg" onclick="selPay('telegram')"><div class="pc-ico">‚úàÔ∏è</div><div class="pc-nm">Telegram</div><div class="pc-sb">Contact seller</div></div>
        </div>
        <button class="btm gold" onclick="goStep2()">NEXT ‚Üí</button>
      </div>
      <div id="ms2" style="display:none">
        <div class="steps"><div class="step ok">01 ‚úì</div><div class="step on">02 Pay</div><div class="step">03 Done</div></div>
        <div id="ms2-bin">
          <p style="color:var(--m2);font-size:0.68rem;margin-bottom:11px;line-height:1.8">Send exactly <strong style="color:var(--gold)" id="m-b-price"></strong> to this Binance Pay ID:</p>
          <div class="bin-box"><div class="bin-lbl">Binance Pay ID</div><div class="bin-id" id="m-bin-id">‚Äî</div><button class="copy-btn" onclick="cpBin(this)">üìã Copy ID</button></div>
          <div class="fg"><label>Your Full Name *</label><input type="text" id="m-fullname" placeholder="John Doe"/></div>
          <div class="fg"><label>Binance Username *</label><input type="text" id="m-binuser" placeholder="@yourusername"/></div>
          <div class="fg"><label>Transaction ID (optional)</label><input type="text" id="m-txid" placeholder="TX ID or note"/></div>
        </div>
        <div id="ms2-tg" style="display:none">
          <div class="tg-box"><div class="tg-ico">‚úàÔ∏è</div><div class="tg-t">Contact via Telegram</div><div class="tg-s">Message the seller directly to arrange payment.</div><button class="btn-tgo" onclick="openTG()">Open Telegram ‚Üí</button></div>
          <div class="fg"><label>Your Name</label><input type="text" id="m-tg-name" placeholder="Your name"/></div>
        </div>
        <div style="display:flex;gap:7px;margin-top:12px">
          <button class="btm ghost" onclick="goStep1()" style="flex:0.5">‚Üê Back</button>
          <button class="btm gold" id="m-sub" onclick="submitOrder()">SUBMIT ‚Üí</button>
        </div>
        <div class="emsg" id="m-err"></div>
      </div>
      <div id="ms3" style="display:none">
        <div class="steps"><div class="step ok">01 ‚úì</div><div class="step ok">02 ‚úì</div><div class="step on">03 Done</div></div>
        <div style="text-align:center;padding:16px 0">
          <div style="font-size:2.8rem;margin-bottom:14px">‚è≥</div>
          <div style="font-size:1.1rem;font-weight:800;color:var(--gold);margin-bottom:8px">Order Submitted!</div>
          <div style="color:var(--m2);font-size:0.7rem;line-height:2;font-weight:300;margin-bottom:14px">Admin will verify and approve your order.</div>
          <div style="background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.2);border-radius:var(--r2);padding:10px">
            <div style="font-family:var(--fm);font-size:0.42rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:4px">Your UID</div>
            <div style="font-size:1.4rem;font-weight:900;color:var(--purple);letter-spacing:5px" id="m-final-uid">‚Äî</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- WAIT SCREEN -->
<div class="wait-screen" id="wait-screen">
  <div class="wait-orb">‚è≥</div>
  <div class="wait-title">Waiting for Approval</div>
  <div class="wait-sub">Your order has been submitted. Admin will approve it shortly. <strong style="color:var(--gold)">Keep this page open.</strong></div>
  <div class="wait-uid-box"><div class="wait-uid-l">Your Order UID</div><div class="wait-uid-v" id="wait-uid">‚Äî</div></div>
  <div class="wait-dots"><div class="wait-dot"></div><div class="wait-dot"></div><div class="wait-dot"></div></div>
  <div class="wait-info" id="wait-info">Connecting to server...</div>
</div>
<!-- COMPLETE -->
<div class="complete-screen" id="complete-screen">
  <div class="cs-particles" id="cs-particles"></div>
  <div class="cs-icon">‚úÖ</div>
  <div class="cs-title">Order Complete!</div>
  <div class="cs-sub">Payment verified! You can view your product <strong style="color:var(--gold)">2 times</strong> only.</div>
  <button class="cs-btn" onclick="viewProduct()">üéâ VIEW MY PRODUCT</button>
</div>
<!-- EXPIRED -->
<div class="expired-screen" id="expired-screen">
  <div class="exp-icon">üîí</div>
  <div class="exp-title">Access Expired</div>
  <div class="exp-sub">You've used all your views. Purchase again to access.</div>
  <div class="exp-price"><div class="exp-price-l">Product Price</div><div class="exp-price-v" id="exp-price-v">$‚Äî</div></div>
  <div class="exp-btns">
    <button class="exp-buy" onclick="reorder()">üõí Buy Again</button>
    <button class="exp-tg" onclick="window.open(ST.tg||'https://t.me/jellyofficer','_blank')">‚úàÔ∏è Telegram</button>
  </div>
</div>
<!-- DELIVERY MODAL -->
<div class="modal" id="delivery-modal">
  <div class="mbg" onclick="closeDelivery()"></div>
  <div class="mbox">
    <div class="mhead">
      <button class="mclose" onclick="closeDelivery()">‚úï</button>
      <div class="mtitle">Your Product</div>
      <div class="msub" id="dlv-sub">Order verified</div>
    </div>
    <div class="mbody" id="dlv-content"></div>
  </div>
</div>
<!-- CONFIRM -->
<div class="conf" id="conf">
  <div class="mbg" onclick="closeConf()"></div>
  <div class="conf-box">
    <div class="conf-ico" id="conf-ico">‚ö†Ô∏è</div>
    <div class="conf-t" id="conf-t">Are you sure?</div>
    <div class="conf-s" id="conf-s">This cannot be undone.</div>
    <div class="conf-btns">
      <button class="cn" onclick="closeConf()">Cancel</button>
      <button class="cy" id="conf-yes" onclick="doConf()">Delete</button>
    </div>
  </div>
</div>
<div class="toast" id="toast"></div>
<script>
/* ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ */
const CFG={PASS:'3085',DB:'https://jhasdjhbjhdcbnwdced-default-rtdb.firebaseio.com',MAX_VIEWS:2};

/* ‚îÄ‚îÄ STATE ‚îÄ‚îÄ */
let ST={name:'JellyStore',sub:'Professional digital products.',tg:'https://t.me/jellyofficer',bin:'894307667'};
let payMethod='binance', curProd=null, confCb=null;
let editId=null, imgB64=null, formFiles=[], formTexts=[];
let myOrderKey=null, curAccepted=null;
let pollTimer=null, sseSource=null;

/* ‚îÄ‚îÄ UID (localStorage) ‚îÄ‚îÄ */
function getUID(){
  try{let u=localStorage.getItem('jc_uid');if(!u){u=String(Math.floor(1000+Math.random()*9000));localStorage.setItem('jc_uid',u);}return u;}
  catch(e){return String(Math.floor(1000+Math.random()*9000));}
}
const MY_UID=getUID();

/* ‚îÄ‚îÄ VIEW COUNT ‚îÄ‚îÄ */
function getVC(k){try{return parseInt(localStorage.getItem('vc_'+k)||'0');}catch(e){return 0;}}
function incVC(k){try{const v=getVC(k)+1;localStorage.setItem('vc_'+k,String(v));return v;}catch(e){return 1;}}

/* ‚îÄ‚îÄ FIREBASE REST ‚îÄ‚îÄ */
const DB=CFG.DB;
const fGet=p=>fetch(`${DB}${p}.json`).then(r=>r.json());
const fSet=(p,d)=>fetch(`${DB}${p}.json`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fPst=(p,d)=>fetch(`${DB}${p}.json`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fPat=(p,d)=>fetch(`${DB}${p}.json`,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fDel=p=>fetch(`${DB}${p}.json`,{method:'DELETE'});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   REALTIME LISTENER ‚Äî SSE (Server-Sent Events)
   Firebase REST API supports ?accept=text/event-stream
   This gives INSTANT notification when data changes!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function startListening(orderKey){
  stopListening();
  const url=`${DB}/orders/${orderKey}.json?accept=text/event-stream`;
  let pollCount=0;

  // Method 1: SSE (instant ‚Äî Firebase streams changes)
  try{
    sseSource=new EventSource(url);
    sseSource.addEventListener('put',function(e){
      try{
        const data=JSON.parse(e.data);
        // data.data is the actual order object
        const order=data.data;
        if(order && order.status==='accepted'){
          stopListening();
          onOrderAccepted(order, orderKey);
        }
      }catch(err){}
    });
    sseSource.addEventListener('patch',function(e){
      try{
        const patch=JSON.parse(e.data);
        // patch.data may be {status:'accepted',...}
        if(patch.data && patch.data.status==='accepted'){
          stopListening();
          // Fetch full order then show
          fGet('/orders/'+orderKey).then(o=>{if(o&&!o.error)onOrderAccepted(o,orderKey);});
        }
      }catch(err){}
    });
    sseSource.onerror=function(){
      // SSE failed ‚Äî fall back to polling
      stopSSE();
      startPolling(orderKey);
    };
    updateWaitInfo('Connected ‚Äî waiting for admin...');
  }catch(e){
    // SSE not supported ‚Äî use polling
    startPolling(orderKey);
  }
}

function stopSSE(){if(sseSource){sseSource.close();sseSource=null;}}

/* Polling fallback ‚Äî checks every 4 seconds */
function startPolling(orderKey){
  stopPolling();
  let count=0;
  updateWaitInfo('Polling ‚Äî checking every 4 seconds...');

  async function poll(){
    count++;
    updateWaitInfo(`Check #${count}...`);
    try{
      const d=await fGet('/orders/'+orderKey);
      if(d && typeof d==='object' && !d.error && d.status==='accepted'){
        stopPolling();
        onOrderAccepted(d, orderKey);
      }
    }catch(e){}
  }

  poll(); // immediate
  pollTimer=setInterval(poll, 4000);
}

function stopPolling(){if(pollTimer){clearInterval(pollTimer);pollTimer=null;}}

function stopListening(){stopSSE();stopPolling();}

function updateWaitInfo(msg){
  const el=document.getElementById('wait-info');
  if(el)el.textContent=msg;
}

/* Called when order accepted */
function onOrderAccepted(orderData, orderKey){
  document.getElementById('wait-screen').classList.remove('on');
  document.getElementById('pay-modal').classList.remove('on');
  curAccepted={...orderData, _key:orderKey};
  launchConfetti();
  document.getElementById('complete-screen').classList.add('on');
}

/* ‚îÄ‚îÄ ADMIN PANEL ‚îÄ‚îÄ */
function openAdmin(){
  document.getElementById('admin-panel').classList.add('open');
  const ov=document.getElementById('admin-overlay');
  ov.style.display='block';
  requestAnimationFrame(()=>ov.classList.add('on'));
  document.body.style.overflow='hidden';
}
function closeAdmin(){
  document.getElementById('admin-panel').classList.remove('open');
  const ov=document.getElementById('admin-overlay');
  ov.classList.remove('on');
  setTimeout(()=>{ov.style.display='none';},380);
  document.body.style.overflow='';
}

/* ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ */
function doLogin(){
  if(document.getElementById('ap').value===CFG.PASS){
    document.getElementById('admin-lock').style.display='none';
    document.getElementById('adash').classList.add('on');
    loadSettings();loadOrders();loadAdminProducts();
  }else{
    document.getElementById('lerr').classList.add('on');
    document.getElementById('ap').value='';
    document.getElementById('ap').style.borderColor='var(--red)';
    setTimeout(()=>document.getElementById('ap').style.borderColor='',1200);
  }
}
function doLogout(){
  document.getElementById('admin-lock').style.display='flex';
  document.getElementById('adash').classList.remove('on');
  document.getElementById('ap').value='';
  document.getElementById('lerr').classList.remove('on');
}

/* ‚îÄ‚îÄ TABS ‚îÄ‚îÄ */
function stab(id,btn){
  document.querySelectorAll('.tbtn').forEach(b=>b.classList.remove('on'));
  document.querySelectorAll('.tpane').forEach(p=>p.classList.remove('on'));
  btn.classList.add('on');document.getElementById('tab-'+id).classList.add('on');
  if(id==='orders')loadOrders();if(id==='products')loadAdminProducts();
}

/* ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ */
async function loadSettings(){
  try{
    const d=await fGet('/settings');
    if(d&&!d.error){
      ST={...ST,...d};applySettings();
      if(d.name)document.getElementById('s-name').value=d.name;
      if(d.sub)document.getElementById('s-sub2').value=d.sub;
      if(d.tg)document.getElementById('s-tg').value=d.tg;
      if(d.bin)document.getElementById('s-bin').value=d.bin;
    }
  }catch(e){}
}
function applySettings(){
  const el=document.getElementById('logo-text');
  if(el&&ST.name){const n=ST.name;const m=Math.ceil(n.length/2);el.innerHTML=esc(n.slice(0,m))+'<span>'+esc(n.slice(m))+'</span>';}
  const sub=document.getElementById('s-sub');if(sub&&ST.sub)sub.textContent=ST.sub;
  document.title=ST.name||'JellyStore';
}
async function saveSettings(){
  const s={name:v('s-name')||ST.name,sub:v('s-sub2')||ST.sub,tg:v('s-tg')||ST.tg,bin:v('s-bin')||ST.bin};
  try{await fSet('/settings',s);ST=s;applySettings();showMsg('s-ok','Saved!');toast('Settings saved','ok');}
  catch(e){toast('Error: '+e.message,'bad');}
}

/* ‚îÄ‚îÄ STORE PRODUCTS ‚îÄ‚îÄ */
async function loadStoreProducts(){
  const list=document.getElementById('product-list');
  try{
    const d=await fGet('/products');
    if(!d||d.error||!Object.keys(d).length){
      list.innerHTML='<div class="empty"><div class="empty-ico">üì¶</div><div class="empty-t">No products yet</div><div class="empty-s">Check back soon!</div></div>';
      document.getElementById('stat-p').textContent='0';return;
    }
    const prods=Object.entries(d).map(([id,val])=>({id,...val}));
    document.getElementById('stat-p').textContent=prods.length;
    list.innerHTML=prods.map((p,i)=>{
      const chips=(p.chips||'').split(',').filter(c=>c.trim()).map(c=>`<span class="chip">${esc(c.trim())}</span>`).join('');
      const fItems=(p.files||[]).map(f=>`<div class="item-row"><span class="ir-ico">${fIco(f.name)}</span><span class="ir-name">${esc(f.name)}</span><span class="ir-type">${esc(extOf(f.name))}</span></div>`).join('');
      const tItems=(p.texts||[]).map(t=>`<div class="item-row"><span class="ir-ico">üìù</span><span class="ir-name">${esc(t.label||'Text')}</span><span class="ir-type">TEXT</span></div>`).join('');
      const items=fItems+tItems;
      const imgHtml=p.image?`<img src="${p.image}" alt="${esc(p.name)}" loading="lazy"/><div class="img-grd"></div>`:`<div class="pc-img-ph"><div class="ph-ico">üìÅ</div></div>`;
      const tgUrl=esc(ST.tg||'https://t.me/jellyofficer');
      return `<div class="pcard" style="animation-delay:${i*90}ms">
        <div class="pc-img">
          ${imgHtml}
          ${p.image?`<div class="img-bdgs"><span class="bdg bdg-g">IN STOCK</span>${p.cat?`<span class="bdg bdg-p">${esc(p.cat)}</span>`:''}</div>`:''}
          ${p.price?`<div class="img-price"><div class="ip-v">$${esc(String(p.price))}</div><div class="ip-l">USD</div></div>`:''}
        </div>
        <div class="pc-body">
          ${p.cat?`<div class="pc-cat">${esc(p.cat)}</div>`:''}
          <div class="pc-title">${esc(p.name)}</div>
          <div class="pc-summary">${esc(p.desc||p.summary||'')}</div>
          ${chips?`<div class="pc-chips">${chips}</div>`:''}
          ${items?`<div class="pc-items"><div class="items-lbl">What's Included</div>${items}</div>`:''}
          <div class="pc-cta">
            <button class="btn-buy" onclick='openPay(${JSON.stringify({id:p.id,name:p.name,price:p.price})})'>üõí Buy ‚Äî $${esc(String(p.price||'?'))}</button>
            <a class="btn-tg-s" href="${tgUrl}" target="_blank">‚úà Telegram</a>
          </div>
        </div>
      </div>`;
    }).join('');
  }catch(e){list.innerHTML=`<div class="empty"><div class="empty-ico">‚ö†Ô∏è</div><div class="empty-t">Error</div><div class="empty-s">${esc(e.message)}</div></div>`;}
}

/* ‚îÄ‚îÄ ADMIN ORDERS ‚îÄ‚îÄ */
async function loadOrders(){
  const list=document.getElementById('orders-list');
  list.innerHTML='<div class="no-ord">Loading...</div>';
  try{
    const d=await fGet('/orders');
    const total=d&&!d.error?Object.keys(d).length:0;
    document.getElementById('stat-o').textContent=total;
    if(!d||d.error||!Object.keys(d).length){list.innerHTML='<div class="no-ord">No orders yet.</div>';setStats(0,0);return;}
    const orders=Object.entries(d).map(([k,val])=>({_key:k,...val})).sort((a,b)=>(b.tsMs||0)-(a.tsMs||0));
    setStats(orders.filter(o=>o.status==='pending').length,orders.filter(o=>o.status==='accepted').length);
    list.innerHTML=orders.map((o,i)=>{
      const dt=new Date(o.timestamp||Date.now()).toLocaleString('en-GB',{day:'2-digit',month:'short',hour:'2-digit',minute:'2-digit'});
      const isAcc=o.status==='accepted'||o.status==='sent';
      return `<div class="ocard ${o.status||'pending'}" style="animation-delay:${i*40}ms">
        <div class="o-row">
          <div class="o-num">#${orders.length-i} ¬∑ ${dt}</div>
          <span class="opill ${isAcc?'pill-a':'pill-p'}">${isAcc?'‚úì ACCEPTED':'PENDING'}</span>
        </div>
        <div class="o-user">${esc(o.fullname||o.name||'‚Äî')}</div>
        <div class="o-uid">UID: <span class="uid-b">${esc(o.uid||'‚Äî')}</span></div>
        <div class="o-meta">üì¶ ${esc(o.product||'‚Äî')} ¬∑ ${esc(o.price||'‚Äî')}</div>
        ${o.binUser?`<div class="o-meta" style="color:var(--gold)">Binance: ${esc(o.binUser)}</div>`:''}
        ${o.txid&&o.txid!=='Not provided'?`<div class="o-meta">TX: ${esc(o.txid)}</div>`:''}
        <div class="o-meta">${o.payMethod==='telegram'?'‚úà Telegram':'ü™ô Binance'} ¬∑ ${dt}</div>
        <div class="o-acts">
          <button class="btn-acc ${isAcc?'acc':''}" ${isAcc?'disabled':''}
            data-key="${esc(o._key)}" data-uid="${esc(o.uid||'')}" onclick="acceptOrder(this)">
            ${isAcc?'‚úì Accepted':'‚ö° Accept Order'}
          </button>
          <button class="btn-del" data-key="${esc(o._key)}" onclick="delOrder(this)" title="Delete">‚úï</button>
        </div>
      </div>`;
    }).join('');
  }catch(e){list.innerHTML=`<div class="no-ord">‚ö† ${esc(e.message)}</div>`;setStats(0,0);}
}

function setStats(pg,a){
  document.getElementById('st-p').textContent=document.getElementById('stat-p').textContent;
  document.getElementById('st-pg').textContent=pg;
  document.getElementById('st-a').textContent=a;
}

function acceptOrder(btn){
  const key=btn.getAttribute('data-key');
  const uid=btn.getAttribute('data-uid');
  if(!key)return;
  confirmAction('Accept Order?',`User UID: ${uid} will be notified instantly.`,'‚úÖ',async()=>{
    try{
      // PATCH status to accepted
      const result=await fPat('/orders/'+key,{status:'accepted',acceptedAt:new Date().toISOString()});
      toast('Order accepted! User notified immediately.','ok');
      loadOrders();
    }catch(e){toast('Error: '+e.message,'bad');}
  },'Accept');
}

function delOrder(btn){
  const key=btn.getAttribute('data-key');if(!key)return;
  confirmAction('Delete Order?','Permanently removed.','üóë',async()=>{
    try{await fDel('/orders/'+key);toast('Deleted','ok');loadOrders();}
    catch(e){toast('Error: '+e.message,'bad');}
  });
}

/* ‚îÄ‚îÄ ADMIN PRODUCTS ‚îÄ‚îÄ */
async function loadAdminProducts(){
  const list=document.getElementById('pmgr-list');
  try{
    const d=await fGet('/products');
    if(!d||d.error||!Object.keys(d).length){list.innerHTML='<div class="no-ord">No products. Add one!</div>';document.getElementById('st-p').textContent='0';return;}
    const prods=Object.entries(d).map(([id,val])=>({id,...val}));
    document.getElementById('st-p').textContent=prods.length;
    list.innerHTML=prods.map((p,i)=>{
      const fc=(p.files||[]).length+(p.texts||[]).length;
      return `<div class="pm-item">
        ${p.image?`<div class="pm-thumb"><img src="${p.image}" alt=""/></div>`:`<div class="pm-thumb">üì¶</div>`}
        <div class="pm-info"><div class="pm-name">${esc(p.name)}</div><div class="pm-meta"><span class="pm-price">$${esc(String(p.price||0))}</span>${p.cat?' ¬∑ '+esc(p.cat):''}${fc?' ¬∑ '+fc+' item(s)':''}</div></div>
        <div class="pm-acts">
          <button class="btn-del" style="color:var(--blue);border-color:rgba(56,189,248,0.2)" onclick="editProduct('${esc(p.id)}')" title="Edit">‚úèÔ∏è</button>
          <button class="btn-del" data-id="${esc(p.id)}" onclick="delProd(this)" title="Delete">‚úï</button>
        </div>
      </div>`;
    }).join('');
  }catch(e){list.innerHTML=`<div class="no-ord">‚ö† ${esc(e.message)}</div>`;}
}

function toggleAF(){
  editId=null;imgB64=null;formFiles=[];formTexts=[];
  const f=document.getElementById('addform');const showing=f.style.display!=='none';
  f.style.display=showing?'none':'block';
  if(!showing){document.getElementById('af-title').textContent='Add New Product';document.getElementById('save-btn').textContent='üíæ SAVE';clearAF();}
}
function clearAF(){
  ['p-name','p-cat','p-price','p-desc','p-chips'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  imgB64=null;formFiles=[];formTexts=[];renderImg();renderFiles();renderTexts();closeTE();
  document.getElementById('p-err').classList.remove('on');document.getElementById('p-ok').classList.remove('on');
}
async function editProduct(id){
  try{
    const d=await fGet('/products/'+id);
    editId=id;imgB64=d.image||null;formFiles=d.files||[];formTexts=d.texts||[];
    ['p-name','p-cat','p-price','p-desc','p-chips'].forEach(k=>{
      const el=document.getElementById(k);if(el)el.value=d[k.replace('p-','')]||d.desc||'';
    });
    document.getElementById('p-name').value=d.name||'';
    document.getElementById('p-cat').value=d.cat||'';
    document.getElementById('p-price').value=d.price||'';
    document.getElementById('p-desc').value=d.desc||d.summary||'';
    document.getElementById('p-chips').value=d.chips||'';
    document.getElementById('af-title').textContent='Edit Product';
    document.getElementById('save-btn').textContent='üíæ UPDATE';
    document.getElementById('addform').style.display='block';
    renderImg();renderFiles();renderTexts();
  }catch(e){toast('Load failed','bad');}
}
async function saveProduct(){
  const name=v('p-name');const price=v('p-price');
  const err=document.getElementById('p-err');const btn=document.getElementById('save-btn');
  if(!name||!price){err.textContent='Name and price required.';err.classList.add('on');return;}
  err.classList.remove('on');btn.disabled=true;btn.textContent='Saving...';
  const prod={name,price:parseFloat(price),cat:v('p-cat'),desc:v('p-desc'),chips:v('p-chips'),image:imgB64||null,files:formFiles,texts:formTexts,updatedAt:new Date().toISOString()};
  try{
    if(editId){await fPat('/products/'+editId,prod);}else{prod.createdAt=new Date().toISOString();await fPst('/products',prod);}
    btn.disabled=false;btn.textContent=editId?'üíæ UPDATE':'üíæ SAVE';
    showMsg('p-ok',editId?'Updated!':'Added!');toast(editId?'Product updated':'Product added','ok');
    clearAF();editId=null;document.getElementById('addform').style.display='none';
    loadAdminProducts();loadStoreProducts();
  }catch(e){btn.disabled=false;btn.textContent=editId?'üíæ UPDATE':'üíæ SAVE';err.textContent='Error: '+e.message;err.classList.add('on');}
}
function cancelAF(){document.getElementById('addform').style.display='none';clearAF();editId=null;}
function delProd(btn){
  const id=btn.getAttribute('data-id');if(!id)return;
  confirmAction('Delete Product?','Removed from store.','üóë',async()=>{
    try{await fDel('/products/'+id);toast('Deleted','ok');loadAdminProducts();loadStoreProducts();}
    catch(e){toast('Error: '+e.message,'bad');}
  });
}

/* ‚îÄ‚îÄ IMAGE & FILES ‚îÄ‚îÄ */
function handleImg(input){const f=input.files[0];if(!f)return;const r=new FileReader();r.onload=e=>{imgB64=e.target.result;renderImg();};r.readAsDataURL(f);}
function clearImg(){imgB64=null;renderImg();}
function renderImg(){
  const z=document.getElementById('imdrop');z.querySelectorAll('.prev-img').forEach(el=>el.remove());
  const btn=document.getElementById('clear-img');
  if(imgB64){const img=document.createElement('img');img.src=imgB64;img.className='prev-img';z.appendChild(img);z.querySelector('.id-ico').style.display='none';z.querySelector('.id-l').style.display='none';btn.style.display='';}
  else{z.querySelector('.id-ico').style.display='';z.querySelector('.id-l').style.display='';btn.style.display='none';}
}
function handleFiles(input){Array.from(input.files).forEach(file=>{const r=new FileReader();r.onload=e=>{formFiles.push({name:file.name,size:file.size,base64:e.target.result});renderFiles();};r.readAsDataURL(file);});input.value='';}
function renderFiles(){const list=document.getElementById('files-list');list.innerHTML=formFiles.map((f,i)=>`<div class="ci-item"><span>${fIco(f.name)}</span><span class="ci-name">${esc(f.name)}</span><span class="ci-type">${esc(extOf(f.name))}</span><button class="ci-del" onclick="rmFile(${i})">‚úï</button></div>`).join('');}
function rmFile(i){formFiles.splice(i,1);renderFiles();}
function openTE(){document.getElementById('text-editor-wrap').style.display='block';document.getElementById('open-text-btn').style.display='none';document.getElementById('text-inp').value='';document.getElementById('text-name-inp').value='';}
function closeTE(){document.getElementById('text-editor-wrap').style.display='none';document.getElementById('open-text-btn').style.display='';}
function addText(){const label=v('text-name-inp')||'Content';const content=v('text-inp');if(!content)return;formTexts.push({label,content});renderTexts();closeTE();toast('Text added','ok');}
function renderTexts(){const list=document.getElementById('texts-list');list.innerHTML=formTexts.map((t,i)=>`<div class="ci-item"><span>üìù</span><span class="ci-name">${esc(t.label)}</span><span class="ci-type">TEXT</span><button class="ci-del" onclick="rmText(${i})">‚úï</button></div>`).join('');}
function rmText(i){formTexts.splice(i,1);renderTexts();}

/* ‚îÄ‚îÄ PAY MODAL ‚îÄ‚îÄ */
function openPay(prod){
  curProd=prod;
  document.getElementById('m-pname').textContent=prod.name;
  document.getElementById('m-prod').textContent=prod.name;
  document.getElementById('m-price').textContent='$'+prod.price+' USD';
  document.getElementById('m-b-price').textContent='$'+prod.price+' USD';
  document.getElementById('m-bin-id').textContent=ST.bin||'894307667';
  document.getElementById('m-uid').textContent=MY_UID;
  document.getElementById('m-final-uid').textContent=MY_UID;
  ['m-fullname','m-binuser','m-txid','m-tg-name'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  document.getElementById('m-err').classList.remove('on');
  selPay('binance');goStep1();
  document.getElementById('pay-modal').classList.add('on');
}
function closePay(){document.getElementById('pay-modal').classList.remove('on');}
function goStep1(){sh('ms1');hd('ms2');hd('ms3');}
function goStep2(){hd('ms1');sh('ms2');hd('ms3');if(payMethod==='binance'){sh('ms2-bin');hd('ms2-tg');}else{hd('ms2-bin');sh('ms2-tg');}}
function sh(id){const el=document.getElementById(id);if(el)el.style.display='block';}
function hd(id){const el=document.getElementById(id);if(el)el.style.display='none';}
function selPay(m){payMethod=m;document.getElementById('pc-bin').classList.toggle('sel',m==='binance');document.getElementById('pc-tg').classList.toggle('sel',m==='telegram');}
function cpBin(btn){const val=ST.bin||'894307667';try{navigator.clipboard.writeText(val);}catch(e){}btn.textContent='Copied!';setTimeout(()=>btn.textContent='üìã Copy ID',2200);}
function openTG(){window.open(ST.tg||'https://t.me/jellyofficer','_blank');}

async function submitOrder(){
  const errEl=document.getElementById('m-err');const btn=document.getElementById('m-sub');
  let fullname='',binUser='',txid='';
  if(payMethod==='binance'){
    fullname=v('m-fullname');binUser=v('m-binuser');txid=v('m-txid');
    if(!fullname||!binUser){errEl.textContent='Full name and Binance username required.';errEl.classList.add('on');return;}
  }else{fullname=v('m-tg-name')||'Telegram User';}
  errEl.classList.remove('on');btn.disabled=true;btn.textContent='Saving...';
  const order={
    uid:MY_UID,fullname,
    binUser:binUser||null,txid:txid||'Not provided',
    product:curProd?.name||'‚Äî',productId:curProd?.id||null,
    price:curProd?.price?'$'+curProd.price:'‚Äî',
    payMethod,status:'pending',
    timestamp:new Date().toISOString(),tsMs:Date.now()
  };
  try{
    const r=await fPst('/orders',order);
    if(r&&r.error)throw new Error(r.error);
    myOrderKey=r.name;
    btn.disabled=false;btn.textContent='SUBMIT ‚Üí';
    hd('ms2');sh('ms3');
    // Show waiting screen after 1.8s
    setTimeout(()=>{
      closePay();
      document.getElementById('wait-uid').textContent=MY_UID;
      document.getElementById('wait-screen').classList.add('on');
      // Start listening for acceptance
      startListening(myOrderKey);
    },1800);
    if(document.getElementById('adash').classList.contains('on'))loadOrders();
  }catch(e){
    btn.disabled=false;btn.textContent='SUBMIT ‚Üí';
    errEl.textContent='Error: '+e.message;errEl.classList.add('on');
  }
}

/* ‚îÄ‚îÄ PRODUCT DELIVERY ‚îÄ‚îÄ */
function viewProduct(){
  document.getElementById('complete-screen').classList.remove('on');
  if(!curAccepted)return;
  const key=curAccepted._key||myOrderKey;
  if(!key){showDelivery(curAccepted,null);return;}
  const vc=getVC(key);
  if(vc>=CFG.MAX_VIEWS){showExpired();return;}
  const nv=incVC(key);
  showDelivery(curAccepted, CFG.MAX_VIEWS-nv);
}
function showExpired(){
  document.getElementById('exp-price-v').textContent=curAccepted?.price||curProd?.price?'$'+(curAccepted?.price||curProd?.price):'$‚Äî';
  document.getElementById('expired-screen').classList.add('on');
}
function reorder(){
  document.getElementById('expired-screen').classList.remove('on');
  if(curAccepted)openPay({id:curAccepted.productId||'',name:curAccepted.product||'Product',price:(curAccepted.price||'').replace('$','')});
}
async function showDelivery(order,viewsLeft){
  const modal=document.getElementById('delivery-modal');
  const content=document.getElementById('dlv-content');
  const sub=document.getElementById('dlv-sub');
  if(viewsLeft===0)sub.innerHTML='<span style="color:var(--red)">‚ö† Last view!</span>';
  else if(viewsLeft!=null)sub.innerHTML=`Verified ‚Äî <strong style="color:var(--gold)">${viewsLeft}</strong> view${viewsLeft===1?'':'s'} left`;
  content.innerHTML='<div style="text-align:center;padding:20px;color:var(--m2);font-family:var(--fm);font-size:0.6rem">LOADING...</div>';
  modal.classList.add('on');
  try{
    const prod=order.productId?await fGet('/products/'+order.productId):null;
    let html=`<div style="margin-bottom:18px"><div style="font-size:1.05rem;font-weight:800;margin-bottom:5px">${esc(order.product||'Your Product')}</div><div style="font-family:var(--fm);font-size:0.52rem;color:var(--green)">‚úì Payment verified ‚Äî Order complete</div></div>`;
    if(prod&&!prod.error){
      (prod.texts||[]).forEach(t=>{html+=`<div style="margin-bottom:14px"><div style="font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:6px">${esc(t.label||'Content')}</div><pre style="background:var(--s);border:1px solid var(--b);border-radius:var(--r2);padding:12px;font-family:var(--fm);font-size:0.66rem;color:var(--t2);white-space:pre-wrap;word-break:break-all;line-height:1.7">${esc(t.content||'')}</pre></div>`;});
      if((prod.files||[]).length){
        html+='<div><div style="font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:8px">Download Files</div>';
        prod.files.forEach(f=>{html+=`<div style="display:flex;align-items:center;justify-content:space-between;padding:9px 12px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:5px"><div style="display:flex;align-items:center;gap:8px"><span>${fIco(f.name)}</span><span style="font-family:var(--fm);font-size:0.6rem;color:var(--t2)">${esc(f.name)}</span></div><a href="${f.base64}" download="${esc(f.name)}" style="background:linear-gradient(135deg,var(--gold),#e8a800);color:#06060a;font-family:var(--fm);font-size:0.48rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:5px 12px;border-radius:var(--r3);text-decoration:none">‚¨á Download</a></div>`;});
        html+='</div>';
      }
      if(!(prod.texts||[]).length&&!(prod.files||[]).length)html+=`<p style="color:var(--m2);font-size:0.73rem;line-height:1.9">${esc(prod.desc||'Contact admin for delivery.')}</p>`;
    }else{html+='<p style="color:var(--m2);font-size:0.73rem">Your order is confirmed! Contact admin for delivery.</p>';}
    content.innerHTML=html;
  }catch(e){content.innerHTML='<p style="color:var(--m2);font-size:0.73rem">Order confirmed! Contact admin.</p>';}
}
function closeDelivery(){document.getElementById('delivery-modal').classList.remove('on');}

/* ‚îÄ‚îÄ DELETE ALL ‚îÄ‚îÄ */
function cdel(type){
  confirmAction('Delete ALL '+type+'?','Cannot be undone.','‚ö†Ô∏è',async()=>{
    try{await fDel('/'+type);toast('Deleted','ok');if(type==='orders'){loadOrders();}else{loadAdminProducts();loadStoreProducts();}}
    catch(e){toast('Error: '+e.message,'bad');}
  },'Delete All');
}

/* ‚îÄ‚îÄ CONFIRM ‚îÄ‚îÄ */
function confirmAction(title,sub,icon,cb,yesLbl='Delete'){
  confCb=cb;document.getElementById('conf-t').textContent=title;document.getElementById('conf-s').textContent=sub;
  document.getElementById('conf-ico').textContent=icon;document.getElementById('conf-yes').textContent=yesLbl;
  document.getElementById('conf').classList.add('on');
}
function closeConf(){document.getElementById('conf').classList.remove('on');confCb=null;}
async function doConf(){closeConf();if(confCb)await confCb();}

/* ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ */
function launchConfetti(){
  const c=document.getElementById('cs-particles');c.innerHTML='';
  const colors=['#f0b429','#22c55e','#38bdf8','#a855f7','#ff6b6b','#ffe08a'];
  for(let i=0;i<70;i++){const p=document.createElement('div');p.className='cs-p';const sz=Math.random()*9+3;p.style.cssText=`width:${sz}px;height:${sz}px;background:${colors[Math.floor(Math.random()*colors.length)]};left:${Math.random()*100}%;animation-duration:${Math.random()*3.5+2}s;animation-delay:${Math.random()*1.2}s;border-radius:${Math.random()>0.5?'50%':'3px'};`;c.appendChild(p);}
}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
let _tt;
function toast(msg,type=''){const t=document.getElementById('toast');t.textContent=msg;t.className='toast on '+(type||'');clearTimeout(_tt);_tt=setTimeout(()=>t.className='toast',3400);}

/* ‚îÄ‚îÄ PARTICLES ‚îÄ‚îÄ */
function initParticles(){
  const c=document.getElementById('particles');
  for(let i=0;i<18;i++){const p=document.createElement('div');p.className='particle';const sz=Math.random()*2.5+0.8;const col=['#f0b429','#38bdf8','#a855f7','#22c55e','#ec4899'][Math.floor(Math.random()*5)];p.style.cssText=`width:${sz}px;height:${sz}px;background:${col};left:${Math.random()*100}%;animation-duration:${Math.random()*14+9}s;animation-delay:${Math.random()*12}s;opacity:${Math.random()*0.4+0.08};`;c.appendChild(p);}
}
document.addEventListener('mousemove',e=>{const g=document.getElementById('cg');g.style.left=e.clientX+'px';g.style.top=e.clientY+'px';});

/* ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ */
function v(id){const el=document.getElementById(id);return el?(el.value||'').trim():'';}
function fIco(name){if(!name)return'üìÑ';const e=extOf(name).toLowerCase();if(['zip','rar','7z','tar','gz'].includes(e))return'üóú';if(e==='pdf')return'üìï';if(['png','jpg','jpeg','gif','webp','svg'].includes(e))return'üñº';if(['bin','hex','elf','fw'].includes(e))return'‚öô';if(['js','ts','jsx','tsx'].includes(e))return'üåê';if(['html','css'].includes(e))return'üé®';if(['py','rb','go','rs','c','cpp'].includes(e))return'üêç';if(['sh','bat','ps1'].includes(e))return'‚ö°';if(['json','yaml','yml'].includes(e))return'üìã';if(['md','txt','doc'].includes(e))return'üìù';return'üìÑ';}
function extOf(n){return(n||'').split('.').pop();}
function esc(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;');}
function showMsg(id,msg){const el=document.getElementById(id);if(!el)return;el.textContent=msg;el.classList.add('on');setTimeout(()=>el.classList.remove('on'),3500);}

document.addEventListener('keydown',e=>{if(e.key==='Escape'){closePay();closeConf();closeDelivery();closeAdmin();document.getElementById('expired-screen').classList.remove('on');}});

/* ‚îÄ‚îÄ INIT ‚îÄ‚îÄ */
initParticles();
document.getElementById('nav-uid-val').textContent=MY_UID;
(async()=>{await loadSettings();await loadStoreProducts();})();
</script>
</body>
</html>
