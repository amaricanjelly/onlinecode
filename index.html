<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DigitalVault</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#06060a;--bg2:#09090e;--s:#0d0d16;--c:#11111c;--c2:#161624;
  --b:rgba(255,255,255,0.06);--b2:rgba(255,255,255,0.11);--b3:rgba(255,255,255,0.17);
  --gold:#f0b429;--gold2:#ffe08a;--green:#22c55e;--blue:#38bdf8;
  --red:#ef4444;--purple:#a855f7;
  --t:#eeeef8;--t2:#b8b8d0;--m:#5a5a78;--m2:#8888aa;
  --fh:'Outfit',sans-serif;--fm:'JetBrains Mono',monospace;
  --r:12px;--r2:7px;--r3:4px;
  --ease:cubic-bezier(0.16,1,0.3,1);
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;background:var(--bg);color:var(--t);font-family:var(--fh);overflow:hidden;}
::selection{background:rgba(240,180,41,0.22);color:var(--gold);}
::-webkit-scrollbar{width:3px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.08);border-radius:2px;}
::-webkit-scrollbar-thumb:hover{background:rgba(240,180,41,0.25);}
button,input,textarea,select{font-family:var(--fh);cursor:pointer;}
input,textarea,select{cursor:text;}
a{text-decoration:none;color:inherit;}

#particles{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden;}
.particle{position:absolute;border-radius:50%;animation:float-p linear infinite;}
@keyframes float-p{0%{transform:translateY(100vh) scale(0);opacity:0}10%{opacity:1}90%{opacity:0.3}100%{transform:translateY(-10vh) scale(1);opacity:0}}

.orb{position:fixed;border-radius:50%;pointer-events:none;z-index:0;filter:blur(90px);}
.o1{width:600px;height:600px;background:radial-gradient(circle,rgba(240,180,41,0.04),transparent);top:-200px;left:10%;animation:oa 14s ease-in-out infinite;}
.o2{width:400px;height:400px;background:radial-gradient(circle,rgba(56,189,248,0.035),transparent);bottom:0;right:20%;animation:ob 18s ease-in-out infinite;}
.o3{width:300px;height:300px;background:radial-gradient(circle,rgba(168,85,247,0.03),transparent);top:40%;left:30%;animation:oc 22s ease-in-out infinite;}
@keyframes oa{0%,100%{transform:translate(0,0)}33%{transform:translate(40px,30px)}66%{transform:translate(-20px,20px)}}
@keyframes ob{0%,100%{transform:translate(0,0)}50%{transform:translate(-50px,-30px)}}
@keyframes oc{0%,100%{transform:translate(0,0)}50%{transform:translate(30px,-40px)}}

.app{display:flex;height:100vh;width:100vw;position:relative;z-index:1;}
.store{flex:1;overflow-y:auto;min-width:0;}
.admin-panel{width:390px;min-width:390px;height:100vh;background:var(--bg2);border-left:1px solid var(--b);display:flex;flex-direction:column;overflow:hidden;}

.snav{display:flex;align-items:center;justify-content:space-between;padding:15px 32px;background:rgba(6,6,10,0.88);backdrop-filter:blur(32px);border-bottom:1px solid var(--b);position:sticky;top:0;z-index:100;}
.nav-logo{display:flex;align-items:center;gap:10px;}
.gem{width:24px;height:24px;background:var(--gold);clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);animation:gem 10s linear infinite;flex-shrink:0;}
@keyframes gem{to{transform:rotate(360deg)}}
.logo-t{font-size:1.02rem;font-weight:800;letter-spacing:0.5px;}
.logo-t span{color:var(--gold);}
.nav-r{display:flex;align-items:center;gap:10px;}
.live-b{display:flex;align-items:center;gap:5px;font-family:var(--fm);font-size:0.5rem;color:var(--m2);letter-spacing:1px;}
.ldot{width:5px;height:5px;border-radius:50%;background:var(--green);box-shadow:0 0 8px var(--green);animation:blink 2s infinite;}
@keyframes blink{0%,100%{opacity:1;box-shadow:0 0 8px var(--green)}50%{opacity:0.2;box-shadow:none}}
.vtag{font-family:var(--fm);font-size:0.5rem;letter-spacing:2px;color:var(--green);padding:4px 10px;border:1px solid rgba(34,197,94,0.22);background:rgba(34,197,94,0.05);border-radius:var(--r3);}

.hero{padding:48px 32px 32px;position:relative;}
.hero-eyebrow{display:inline-flex;align-items:center;gap:7px;font-family:var(--fm);font-size:0.52rem;letter-spacing:3px;color:var(--gold);text-transform:uppercase;padding:5px 12px;border:1px solid rgba(240,180,41,0.18);background:rgba(240,180,41,0.04);border-radius:var(--r3);margin-bottom:16px;animation:fadeIn 0.8s var(--ease) 0.1s backwards;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.hero-title{font-size:clamp(1.9rem,3.8vw,3rem);font-weight:900;line-height:1.05;margin-bottom:12px;background:linear-gradient(160deg,#fff 30%,rgba(240,180,41,0.6) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:fadeIn 0.8s var(--ease) 0.2s backwards;}
.hero-sub{color:var(--m2);font-size:0.8rem;line-height:1.9;font-weight:300;max-width:440px;margin-bottom:24px;animation:fadeIn 0.8s var(--ease) 0.3s backwards;}
.hero-stats{display:flex;gap:22px;animation:fadeIn 0.8s var(--ease) 0.4s backwards;}
.hstat-v{font-size:1.35rem;font-weight:800;color:var(--gold);}
.hstat-l{font-family:var(--fm);font-size:0.47rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-top:1px;}

.products-wrap{padding:0 32px 80px;}
.sec-hd{display:flex;align-items:center;gap:12px;margin-bottom:18px;}
.sec-hd-l{font-family:var(--fm);font-size:0.5rem;letter-spacing:4px;color:var(--m2);text-transform:uppercase;white-space:nowrap;}
.sec-hd-line{height:1px;flex:1;background:var(--b);}

.pcard{background:var(--c);border:1px solid var(--b);border-radius:var(--r);overflow:hidden;margin-bottom:18px;transition:all 0.35s var(--ease);animation:cardAnim 0.6s var(--ease) backwards;}
@keyframes cardAnim{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
.pcard:hover{border-color:rgba(240,180,41,0.16);box-shadow:0 28px 70px rgba(0,0,0,0.55),0 0 0 1px rgba(240,180,41,0.04);transform:translateY(-5px);}

.pc-img{position:relative;background:var(--s);min-height:200px;max-height:360px;overflow:hidden;display:flex;align-items:center;justify-content:center;}
.pc-img img{width:100%;height:100%;object-fit:cover;display:block;transition:transform 0.6s var(--ease);}
.pcard:hover .pc-img img{transform:scale(1.05);}
.pc-img-ph{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--m2);gap:8px;}
.ph-ico{font-size:2.8rem;opacity:0.18;}
.ph-t{font-family:var(--fm);font-size:0.5rem;letter-spacing:3px;text-transform:uppercase;opacity:0.35;}
.img-grd{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 35%,rgba(6,6,10,0.97) 100%);}
.img-price{position:absolute;bottom:12px;left:12px;background:rgba(6,6,10,0.92);border:1px solid var(--b2);backdrop-filter:blur(16px);border-radius:var(--r2);padding:6px 13px;}
.ip-v{font-size:1.4rem;font-weight:900;color:var(--gold);line-height:1;}
.ip-l{font-family:var(--fm);font-size:0.44rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-top:1px;}
.img-bdgs{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:5px;align-items:flex-end;}
.bdg{font-family:var(--fm);font-size:0.45rem;letter-spacing:2px;text-transform:uppercase;padding:3px 8px;border-radius:var(--r3);backdrop-filter:blur(8px);}
.bdg-g{background:rgba(34,197,94,0.14);color:var(--green);border:1px solid rgba(34,197,94,0.28);}
.bdg-gold{background:rgba(240,180,41,0.14);color:var(--gold);border:1px solid rgba(240,180,41,0.28);}
.bdg-p{background:rgba(168,85,247,0.14);color:var(--purple);border:1px solid rgba(168,85,247,0.28);}

.pc-body{padding:20px 22px 22px;}
.pc-cat{font-family:var(--fm);font-size:0.48rem;letter-spacing:3px;color:var(--m2);text-transform:uppercase;margin-bottom:6px;display:flex;align-items:center;gap:7px;}
.pc-cat::before{content:'';width:14px;height:1px;background:var(--m2);}
.pc-title{font-size:1.4rem;font-weight:800;line-height:1.1;margin-bottom:10px;}
.pc-summary{color:var(--m2);font-size:0.78rem;line-height:1.9;font-weight:300;margin-bottom:16px;}
.pc-chips{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:16px;}
.chip{font-family:var(--fm);font-size:0.54rem;letter-spacing:1px;color:var(--m2);padding:3px 9px;background:var(--s);border:1px solid var(--b);border-radius:var(--r3);}

.pc-items{margin-bottom:16px;}
.items-lbl{font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--m);text-transform:uppercase;margin-bottom:6px;}
.item-row{display:flex;align-items:center;gap:7px;padding:7px 10px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:4px;}
.ir-ico{font-size:0.9rem;}
.ir-name{font-family:var(--fm);font-size:0.62rem;color:var(--m2);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ir-type{font-family:var(--fm);font-size:0.44rem;color:var(--m);padding:2px 5px;background:var(--c2);border-radius:2px;text-transform:uppercase;}

.pc-cta{display:flex;gap:8px;flex-wrap:wrap;}
.btn-buy{flex:1;min-width:110px;background:var(--gold);color:#06060a;font-family:var(--fm);font-size:0.64rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:13px 18px;border:none;border-radius:var(--r2);transition:all 0.22s var(--ease);position:relative;overflow:hidden;}
.btn-buy::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.2),transparent);opacity:0;transition:opacity 0.2s;}
.btn-buy:hover{background:var(--gold2);transform:translateY(-2px);box-shadow:0 12px 35px rgba(240,180,41,0.4);}
.btn-buy:hover::after{opacity:1;}
.btn-buy:active{transform:scale(0.96);}
.btn-tg-s{background:rgba(56,189,248,0.07);color:var(--blue);border:1px solid rgba(56,189,248,0.17);font-family:var(--fm);font-size:0.62rem;letter-spacing:1px;text-transform:uppercase;padding:13px 15px;border-radius:var(--r2);transition:all 0.2s;display:inline-flex;align-items:center;gap:6px;}
.btn-tg-s:hover{background:rgba(56,189,248,0.14);border-color:rgba(56,189,248,0.38);transform:translateY(-2px);}

.empty{text-align:center;padding:70px 20px;}
.empty-ico{font-size:3rem;opacity:0.16;margin-bottom:13px;}
.empty-t{font-size:1rem;font-weight:600;color:var(--m2);margin-bottom:5px;}
.empty-s{font-size:0.72rem;color:var(--m2);opacity:0.5;font-weight:300;line-height:1.9;}

.admin-lock{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:36px 26px;text-align:center;}
.lock-orb{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--c2),var(--s));border:1px solid var(--b2);display:flex;align-items:center;justify-content:center;font-size:1.6rem;margin-bottom:18px;box-shadow:0 0 50px rgba(240,180,41,0.06);}
.lock-title{font-size:1.05rem;font-weight:700;margin-bottom:6px;}
.lock-sub{color:var(--m2);font-size:0.72rem;line-height:1.9;font-weight:300;margin-bottom:24px;}
.lock-div{width:100%;height:1px;background:var(--b);margin-bottom:24px;}

.fg{margin-bottom:10px;text-align:left;}
.fg label,.flbl{display:block;font-family:var(--fm);font-size:0.5rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-bottom:5px;}
.fg input,.fg textarea,.fg select{width:100%;background:var(--c);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.73rem;padding:10px 12px;outline:none;transition:all 0.2s;border-radius:var(--r2);}
.fg textarea{resize:vertical;min-height:68px;line-height:1.7;}
.fg input:focus,.fg textarea:focus{border-color:rgba(240,180,41,0.38);background:var(--c2);box-shadow:0 0 0 3px rgba(240,180,41,0.05);}
.fg select option{background:var(--c);}
.btm{width:100%;font-family:var(--fm);font-size:0.62rem;font-weight:600;letter-spacing:2px;text-transform:uppercase;padding:11px;border:none;border-radius:var(--r2);transition:all 0.2s;margin-top:5px;}
.btm.gold{background:var(--gold);color:#06060a;}
.btm.gold:hover{background:var(--gold2);box-shadow:0 5px 20px rgba(240,180,41,0.28);}
.btm.ghost{background:transparent;color:var(--m2);border:1px solid var(--b);}
.btm.ghost:hover{border-color:var(--b2);color:var(--t);}
.btm.red{background:rgba(239,68,68,0.08);color:var(--red);border:1px solid rgba(239,68,68,0.17);}
.btm.red:hover{background:rgba(239,68,68,0.15);}
.btm:disabled{opacity:0.38;pointer-events:none;}
.btm:active{transform:scale(0.97);}
.emsg{color:var(--red);font-family:var(--fm);font-size:0.57rem;margin-top:5px;display:none;line-height:1.7;}
.emsg.on{display:block;}
.smsg{color:var(--green);font-family:var(--fm);font-size:0.57rem;margin-top:5px;display:none;line-height:1.7;}
.smsg.on{display:block;}

.adash{display:none;flex-direction:column;height:100%;}
.adash.on{display:flex;}
.dash-head{padding:12px 14px;border-bottom:1px solid var(--b);background:var(--s);flex-shrink:0;}
.dash-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.dash-logo{display:flex;align-items:center;gap:7px;font-size:0.8rem;font-weight:800;letter-spacing:1px;}
.d-gem{width:9px;height:9px;background:var(--gold);clip-path:polygon(50% 0,100% 50%,50% 100%,0 50%);}
.dash-logo span{color:var(--red);}
.btn-lo{background:none;border:1px solid var(--b);color:var(--m2);font-family:var(--fm);font-size:0.5rem;letter-spacing:1px;padding:4px 10px;border-radius:var(--r3);transition:all 0.2s;}
.btn-lo:hover{border-color:rgba(239,68,68,0.38);color:var(--red);}
.stats-g{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;}
.sbox{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);padding:8px;text-align:center;}
.sb-l{font-family:var(--fm);font-size:0.4rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;margin-bottom:2px;}
.sb-v{font-size:1.4rem;font-weight:800;color:var(--green);}
.sb-v.g{color:var(--gold);}.sb-v.b{color:var(--blue);}

.tabs{display:flex;border-bottom:1px solid var(--b);flex-shrink:0;background:var(--s);}
.tbtn{flex:1;padding:10px 4px;font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;text-transform:uppercase;color:var(--m2);border:none;background:none;border-bottom:2px solid transparent;transition:all 0.2s;}
.tbtn.on{color:var(--gold);border-bottom-color:var(--gold);}
.tbtn:hover:not(.on){color:var(--t2);}
.tpane{flex:1;overflow-y:auto;display:none;padding:11px;}
.tpane.on{display:block;}

.obar{display:flex;gap:6px;margin-bottom:9px;}
.bsm{background:none;border:1px solid var(--b);color:var(--m2);font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;text-transform:uppercase;padding:7px;border-radius:var(--r2);transition:all 0.2s;flex:1;}
.bsm:hover{border-color:var(--b2);color:var(--t);}
.bsm.dr:hover{border-color:rgba(239,68,68,0.38);color:var(--red);}

.ocard{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:7px;padding:12px;position:relative;transition:all 0.2s;animation:slideIn 0.32s var(--ease) backwards;}
@keyframes slideIn{from{opacity:0;transform:translateX(10px)}to{opacity:1;transform:translateX(0)}}
.ocard:hover{border-color:var(--b2);}
.ocard.pending{border-left:3px solid var(--gold);}
.ocard.accepted{border-left:3px solid var(--green);}
.ocard.sent{border-left:3px solid var(--blue);opacity:0.62;}

.o-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px;}
.o-num{font-family:var(--fm);font-size:0.43rem;letter-spacing:2px;color:var(--m2);text-transform:uppercase;}
.opill{font-family:var(--fm);font-size:0.42rem;letter-spacing:1px;text-transform:uppercase;padding:2px 7px;border-radius:2px;}
.pill-p{background:rgba(240,180,41,0.1);color:var(--gold);border:1px solid rgba(240,180,41,0.22);}
.pill-a{background:rgba(34,197,94,0.1);color:var(--green);border:1px solid rgba(34,197,94,0.22);}
.pill-s{background:rgba(56,189,248,0.08);color:var(--blue);border:1px solid rgba(56,189,248,0.2);}

.o-user{font-size:0.8rem;font-weight:700;color:var(--t);margin-bottom:2px;}
.o-uid{font-family:var(--fm);font-size:0.52rem;color:var(--purple);margin-bottom:2px;display:flex;align-items:center;gap:5px;}
.uid-badge{background:rgba(168,85,247,0.1);border:1px solid rgba(168,85,247,0.22);padding:1px 7px;border-radius:2px;}
.o-prod{font-family:var(--fm);font-size:0.52rem;color:var(--m2);margin-bottom:2px;}
.o-bin{font-family:var(--fm);font-size:0.5rem;color:var(--gold);margin-bottom:2px;}
.o-binname{font-family:var(--fm);font-size:0.5rem;color:var(--m2);margin-bottom:7px;}
.o-acts{display:flex;gap:5px;flex-wrap:wrap;}
.btn-acc{flex:1;background:var(--gold);color:#06060a;border:none;font-family:var(--fm);font-size:0.52rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:7px 8px;border-radius:var(--r2);transition:all 0.2s;}
.btn-acc:hover:not(:disabled){background:var(--gold2);box-shadow:0 4px 14px rgba(240,180,41,0.32);}
.btn-acc:disabled{background:var(--s);color:var(--m2);pointer-events:none;}
.btn-acc.accepted{background:rgba(34,197,94,0.12);color:var(--green);border:1px solid rgba(34,197,94,0.22);pointer-events:none;}
.btn-ico{background:none;border:1px solid var(--b);color:var(--m2);font-size:0.68rem;width:28px;height:28px;border-radius:var(--r2);display:inline-flex;align-items:center;justify-content:center;transition:all 0.2s;}
.btn-ico.del:hover{border-color:rgba(239,68,68,0.38);color:var(--red);}
.no-ord{text-align:center;padding:32px 10px;color:var(--m2);font-family:var(--fm);font-size:0.58rem;line-height:2;letter-spacing:1px;}

.pm-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:9px;}
.pm-t{font-size:0.7rem;font-weight:700;}
.btn-ap{background:rgba(240,180,41,0.08);color:var(--gold);border:1px solid rgba(240,180,41,0.2);font-family:var(--fm);font-size:0.5rem;letter-spacing:1px;text-transform:uppercase;padding:5px 11px;border-radius:var(--r3);transition:all 0.2s;}
.btn-ap:hover{background:rgba(240,180,41,0.15);}
.pm-item{background:var(--c);border:1px solid var(--b);border-radius:var(--r2);padding:10px 11px;margin-bottom:6px;display:flex;align-items:center;gap:9px;transition:all 0.2s;animation:slideIn 0.3s var(--ease) backwards;}
.pm-item:hover{border-color:var(--b2);}
.pm-thumb{width:42px;height:42px;border-radius:var(--r2);object-fit:cover;background:var(--s);border:1px solid var(--b);flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:1.1rem;overflow:hidden;}
.pm-thumb img{width:100%;height:100%;object-fit:cover;}
.pm-info{flex:1;min-width:0;}
.pm-name{font-size:0.76rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px;}
.pm-meta{font-family:var(--fm);font-size:0.5rem;color:var(--m2);}
.pm-price{color:var(--gold);}
.pm-acts{display:flex;gap:4px;flex-shrink:0;}

.af{background:var(--c);border:1px solid var(--b);border-radius:var(--r);padding:14px;margin-top:8px;animation:fadeIn 0.3s var(--ease);}
.af-hd{font-size:0.76rem;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:7px;}
.af-hd::before{content:'‚óÜ';color:var(--gold);font-size:0.65rem;}

.imdrop{width:100%;height:115px;background:var(--s);border:2px dashed var(--b);border-radius:var(--r2);display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--m2);transition:all 0.2s;position:relative;overflow:hidden;margin-bottom:8px;}
.imdrop:hover{border-color:rgba(240,180,41,0.3);}
.imdrop img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;}
.id-ico{font-size:1.7rem;opacity:0.26;margin-bottom:4px;}
.id-l{font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;text-transform:uppercase;opacity:0.4;}
.hin{position:absolute;inset:0;opacity:0;width:100%;height:100%;}

.ci-list{margin-bottom:8px;}
.ci-item{display:flex;align-items:center;justify-content:space-between;gap:7px;padding:7px 9px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:4px;animation:fadeIn 0.2s var(--ease);}
.ci-name{font-family:var(--fm);font-size:0.6rem;color:var(--m2);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ci-type{font-family:var(--fm);font-size:0.44rem;color:var(--m);padding:2px 5px;background:var(--c2);border-radius:2px;text-transform:uppercase;flex-shrink:0;}
.ci-del{background:none;border:none;color:var(--m2);font-size:0.72rem;padding:0 4px;transition:color 0.15s;flex-shrink:0;}
.ci-del:hover{color:var(--red);}
.add-ci-btn{width:100%;background:none;border:1px dashed var(--b);color:var(--m2);font-family:var(--fm);font-size:0.53rem;letter-spacing:1px;text-transform:uppercase;padding:8px;border-radius:var(--r2);transition:all 0.2s;margin-bottom:8px;position:relative;overflow:hidden;}
.add-ci-btn:hover{border-color:var(--b2);color:var(--t2);}

.text-editor-wrap{margin-bottom:8px;}
.text-editor{width:100%;min-height:90px;background:var(--s);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.7rem;padding:10px 12px;outline:none;resize:vertical;border-radius:var(--r2);line-height:1.7;transition:all 0.2s;}
.text-editor:focus{border-color:rgba(240,180,41,0.38);background:var(--c2);}
.text-name-inp{width:100%;background:var(--c);border:1px solid var(--b);color:var(--t);font-family:var(--fm);font-size:0.68rem;padding:8px 11px;outline:none;border-radius:var(--r2);transition:all 0.2s;margin-bottom:5px;}
.text-name-inp:focus{border-color:rgba(240,180,41,0.38);}
.add-text-btn{width:100%;background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.2);color:var(--purple);font-family:var(--fm);font-size:0.5rem;letter-spacing:1px;text-transform:uppercase;padding:8px;border-radius:var(--r2);transition:all 0.2s;margin-bottom:8px;}
.add-text-btn:hover{background:rgba(168,85,247,0.15);}

.dz{background:rgba(239,68,68,0.04);border:1px solid rgba(239,68,68,0.13);border-radius:var(--r2);padding:11px;margin-top:10px;}
.dz-t{font-family:var(--fm);font-size:0.48rem;letter-spacing:2px;color:var(--red);text-transform:uppercase;margin-bottom:8px;}

.sf{background:var(--c);border:1px solid var(--b);border-radius:var(--r);padding:13px;margin-bottom:11px;}
.sf-t{font-size:0.74rem;font-weight:700;margin-bottom:11px;display:flex;align-items:center;gap:6px;}
.sf-t::before{content:'‚óÜ';color:var(--gold);font-size:0.62rem;}

/* ‚ïê‚ïê‚ïê PAY MODAL ‚ïê‚ïê‚ïê */
.modal{display:none;position:fixed;inset:0;z-index:3000;align-items:center;justify-content:center;padding:16px;}
.modal.on{display:flex;}
.mbg{position:absolute;inset:0;background:rgba(0,0,0,0.93);backdrop-filter:blur(18px);}
.mbox{position:relative;z-index:1;background:var(--c);border:1px solid var(--b2);border-radius:var(--r);width:100%;max-width:440px;max-height:92vh;overflow-y:auto;animation:mopen 0.42s var(--ease);box-shadow:0 60px 140px rgba(0,0,0,0.75);}
@keyframes mopen{from{opacity:0;transform:translateY(30px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}
.mhead{padding:22px 22px 17px;border-bottom:1px solid var(--b);background:linear-gradient(135deg,var(--s),var(--c));position:relative;}
.mhead::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--gold),var(--gold2),var(--gold));border-radius:var(--r) var(--r) 0 0;}
.mclose{position:absolute;top:11px;right:12px;background:none;border:1px solid var(--b);color:var(--m2);width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.76rem;transition:all 0.2s;}
.mclose:hover{border-color:rgba(239,68,68,0.4);color:var(--red);}
.mtitle{font-size:1.18rem;font-weight:800;margin-bottom:3px;}
.msub{color:var(--m2);font-size:0.68rem;line-height:1.8;font-weight:300;}
.m-pname{font-family:var(--fm);font-size:0.55rem;color:var(--gold);margin-top:4px;letter-spacing:1px;}
.mbody{padding:18px 22px;}

.steps{display:flex;gap:5px;margin-bottom:18px;}
.step{flex:1;text-align:center;font-family:var(--fm);font-size:0.48rem;letter-spacing:1px;text-transform:uppercase;padding:6px;border-radius:var(--r2);background:var(--s);color:var(--m2);border:1px solid var(--b);transition:all 0.2s;}
.step.on{color:var(--gold);border-color:rgba(240,180,41,0.28);background:rgba(240,180,41,0.05);}
.step.ok{color:var(--green);border-color:rgba(34,197,94,0.2);background:rgba(34,197,94,0.04);}

.osum{background:var(--s);border:1px solid var(--b);border-radius:var(--r2);padding:12px;margin-bottom:13px;}
.osum-row{display:flex;justify-content:space-between;margin-bottom:6px;font-size:0.7rem;}
.osum-row:last-child{margin:0;}
.osl{color:var(--m2);}

/* Binance form */
.bin-box{background:rgba(240,180,41,0.04);border:1px solid rgba(240,180,41,0.18);border-radius:var(--r2);padding:13px;text-align:center;margin-bottom:13px;}
.bin-lbl{font-family:var(--fm);font-size:0.46rem;letter-spacing:3px;color:var(--gold);text-transform:uppercase;margin-bottom:5px;}
.bin-id{font-size:1.65rem;font-weight:900;color:var(--gold);letter-spacing:5px;margin-bottom:7px;}
.copy-btn{background:none;border:1px solid rgba(240,180,41,0.28);color:var(--gold);font-family:var(--fm);font-size:0.52rem;letter-spacing:1px;padding:5px 13px;border-radius:var(--r3);transition:all 0.2s;}
.copy-btn:hover{background:rgba(240,180,41,0.1);}

/* UID display in modal */
.uid-display{background:rgba(168,85,247,0.06);border:1px solid rgba(168,85,247,0.2);border-radius:var(--r2);padding:12px;text-align:center;margin-bottom:14px;}
.uid-lbl{font-family:var(--fm);font-size:0.46rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:5px;}
.uid-val{font-size:1.6rem;font-weight:900;color:var(--purple);letter-spacing:5px;}
.uid-sub{font-family:var(--fm);font-size:0.5rem;color:var(--m2);margin-top:4px;}

/* ‚ïê‚ïê‚ïê WAITING SCREEN ‚ïê‚ïê‚ïê */
.wait-screen{position:fixed;inset:0;z-index:4000;background:rgba(0,0,0,0.96);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px;}
.wait-screen.on{display:flex;}
.wait-orb{width:100px;height:100px;border-radius:50%;border:2px solid rgba(240,180,41,0.3);display:flex;align-items:center;justify-content:center;font-size:2.5rem;margin-bottom:24px;position:relative;animation:pulse-orb 2s ease-in-out infinite;}
@keyframes pulse-orb{0%,100%{box-shadow:0 0 0 0 rgba(240,180,41,0.3)}50%{box-shadow:0 0 0 20px rgba(240,180,41,0)}}
.wait-orb::before,.wait-orb::after{content:'';position:absolute;inset:-8px;border-radius:50%;border:1px solid rgba(240,180,41,0.15);animation:ring-spin 3s linear infinite;}
.wait-orb::after{inset:-16px;border-color:rgba(240,180,41,0.08);animation-duration:5s;animation-direction:reverse;}
@keyframes ring-spin{to{transform:rotate(360deg)}}
.wait-title{font-size:1.4rem;font-weight:800;margin-bottom:8px;color:var(--t);}
.wait-sub{color:var(--m2);font-size:0.78rem;line-height:1.9;font-weight:300;max-width:360px;margin-bottom:24px;}
.wait-uid-box{background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.22);border-radius:var(--r2);padding:10px 20px;margin-bottom:24px;}
.wait-uid-l{font-family:var(--fm);font-size:0.46rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:4px;}
.wait-uid-v{font-size:1.5rem;font-weight:900;color:var(--purple);letter-spacing:5px;}
.wait-dots{display:flex;gap:6px;justify-content:center;margin-bottom:20px;}
.wait-dot{width:8px;height:8px;border-radius:50%;background:var(--gold);animation:wdot 1.4s ease-in-out infinite;}
.wait-dot:nth-child(2){animation-delay:0.2s;}
.wait-dot:nth-child(3){animation-delay:0.4s;}
@keyframes wdot{0%,80%,100%{transform:scale(0.6);opacity:0.4}40%{transform:scale(1.1);opacity:1}}

/* ‚ïê‚ïê‚ïê COMPLETE SCREEN ‚ïê‚ïê‚ïê */
.complete-screen{position:fixed;inset:0;z-index:4500;display:none;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:30px;background:rgba(0,0,0,0.97);backdrop-filter:blur(24px);}
.complete-screen.on{display:flex;}
.cs-particles{position:absolute;inset:0;overflow:hidden;pointer-events:none;}
.cs-p{position:absolute;width:6px;height:6px;border-radius:50%;animation:cs-float linear forwards;}
@keyframes cs-float{0%{transform:translateY(100vh) rotate(0deg);opacity:1}100%{transform:translateY(-20px) rotate(720deg);opacity:0}}
.cs-icon{font-size:4rem;margin-bottom:20px;animation:cs-bounce 0.7s var(--ease);}
@keyframes cs-bounce{0%{transform:scale(0.2);opacity:0}70%{transform:scale(1.15)}100%{transform:scale(1);opacity:1}}
.cs-title{font-size:1.8rem;font-weight:900;color:var(--green);margin-bottom:10px;animation:fadeIn 0.5s var(--ease) 0.3s backwards;}
.cs-sub{color:var(--m2);font-size:0.82rem;line-height:2;font-weight:300;max-width:380px;margin-bottom:28px;animation:fadeIn 0.5s var(--ease) 0.4s backwards;}
.cs-btn{background:var(--gold);color:#06060a;font-family:var(--fm);font-size:0.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:16px 36px;border:none;border-radius:var(--r2);transition:all 0.2s;animation:fadeIn 0.5s var(--ease) 0.5s backwards;position:relative;overflow:hidden;}
.cs-btn::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.18),transparent);opacity:0;transition:opacity 0.2s;}
.cs-btn:hover{background:var(--gold2);transform:translateY(-3px);box-shadow:0 15px 40px rgba(240,180,41,0.45);}
.cs-btn:hover::before{opacity:1;}
.cs-btn:active{transform:scale(0.96);}

.conf{display:none;position:fixed;inset:0;z-index:5000;align-items:center;justify-content:center;padding:20px;}
.conf.on{display:flex;}
.conf-box{position:relative;z-index:1;background:var(--c2);border:1px solid var(--b2);border-radius:var(--r);padding:24px;width:100%;max-width:310px;text-align:center;animation:mopen 0.3s var(--ease);box-shadow:0 30px 80px rgba(0,0,0,0.65);}
.conf-ico{font-size:2.2rem;margin-bottom:10px;}
.conf-t{font-size:0.9rem;font-weight:700;margin-bottom:6px;}
.conf-s{color:var(--m2);font-size:0.7rem;line-height:1.8;margin-bottom:16px;font-weight:300;}
.conf-btns{display:flex;gap:7px;}
.conf-btns button{flex:1;font-family:var(--fm);font-size:0.58rem;letter-spacing:1px;text-transform:uppercase;padding:10px;border-radius:var(--r2);border:none;transition:all 0.2s;}
.cy{background:var(--red);color:#fff;}.cy:hover{background:#ff6b6b;}
.cn{background:var(--s);color:var(--m2);border:1px solid var(--b)!important;}.cn:hover{color:var(--t);}

.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(60px);background:var(--c2);border:1px solid var(--b2);color:var(--t);font-family:var(--fm);font-size:0.62rem;padding:10px 20px;z-index:9999;transition:transform 0.35s var(--ease),opacity 0.35s;opacity:0;white-space:nowrap;pointer-events:none;border-radius:var(--r2);box-shadow:0 12px 40px rgba(0,0,0,0.5);}
.toast.on{transform:translateX(-50%) translateY(0);opacity:1;}
.toast.ok{border-color:rgba(34,197,94,0.32);color:var(--green);}
.toast.bad{border-color:rgba(239,68,68,0.32);color:var(--red);}
.toast.info{border-color:rgba(240,180,41,0.32);color:var(--gold);}

@media(max-width:900px){
  body{overflow:auto;}
  .app{flex-direction:column;height:auto;}
  .store{overflow:visible;}
  .admin-panel{width:100%;min-width:0;height:auto;border-left:none;border-top:1px solid var(--b);}
  .adash{height:auto;}
  .snav{padding:13px 18px;}
  .hero{padding:34px 18px 26px;}
  .products-wrap{padding:0 18px 50px;}
}
</style>
</head>
<body>

<div id="particles"></div>
<div class="orb o1"></div>
<div class="orb o2"></div>
<div class="orb o3"></div>

<div class="app">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STORE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="store">
  <nav class="snav">
    <div class="nav-logo">
      <div class="gem"></div>
      <div class="logo-t" id="nav-logo-text">Digital<span>Vault</span></div>
    </div>
    <div class="nav-r">
      <div class="live-b"><div class="ldot"></div>LIVE</div>
      <div class="vtag">‚úì VERIFIED</div>
    </div>
  </nav>

  <div class="hero">
    <div class="hero-eyebrow">‚ú¶ Premium Digital Products</div>
    <h1 class="hero-title" id="s-title">CODE. FILES.<br/>TOOLS. SECURED.</h1>
    <p class="hero-sub" id="s-sub">Professional digital products ‚Äî source code, firmware, templates & more. Verified delivery after payment.</p>
    <div class="hero-stats">
      <div class="hstat"><div class="hstat-v" id="stat-p">0</div><div class="hstat-l">Products</div></div>
      <div class="hstat"><div class="hstat-v" id="stat-o">0</div><div class="hstat-l">Orders</div></div>
      <div class="hstat"><div class="hstat-v">24h</div><div class="hstat-l">Delivery</div></div>
    </div>
  </div>

  <div class="products-wrap">
    <div class="sec-hd"><div class="sec-hd-l">All Products</div><div class="sec-hd-line"></div></div>
    <div id="product-list"><div class="empty"><div class="empty-ico">‚è≥</div><div class="empty-t">Loading...</div></div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ADMIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="admin-panel">

  <!-- LOCK -->
  <div class="admin-lock" id="admin-lock">
    <div class="lock-orb">üîê</div>
    <div class="lock-title">Admin Panel</div>
    <div class="lock-sub">Enter password to manage<br/>products and orders</div>
    <div class="lock-div"></div>
    <div class="fg" style="width:100%">
      <label>Password</label>
      <input type="password" id="ap" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')doLogin()"/>
    </div>
    <button class="btm gold" onclick="doLogin()">UNLOCK ‚Üí</button>
    <div class="emsg" id="lerr">Incorrect password.</div>
  </div>

  <!-- DASHBOARD -->
  <div class="adash" id="adash">
    <div class="dash-head">
      <div class="dash-top">
        <div class="dash-logo"><div class="d-gem"></div>ADMIN <span>PANEL</span></div>
        <button class="btn-lo" onclick="doLogout()">LOGOUT</button>
      </div>
      <div class="stats-g">
        <div class="sbox"><div class="sb-l">Products</div><div class="sb-v b" id="st-p">0</div></div>
        <div class="sbox"><div class="sb-l">Pending</div><div class="sb-v g" id="st-pg">0</div></div>
        <div class="sbox"><div class="sb-l">Accepted</div><div class="sb-v" id="st-a">0</div></div>
      </div>
    </div>

    <div class="tabs">
      <button class="tbtn on" onclick="stab('orders',this)">üìã Orders</button>
      <button class="tbtn" onclick="stab('products',this)">üì¶ Products</button>
      <button class="tbtn" onclick="stab('settings',this)">‚öô Settings</button>
    </div>

    <!-- ORDERS -->
    <div class="tpane on" id="tab-orders">
      <div class="obar">
        <button class="bsm" onclick="loadOrders()">‚Üª Refresh</button>
        <button class="bsm dr" onclick="confirmDel('orders','Delete ALL Orders?','All orders will be permanently removed.')">üóë Del All</button>
      </div>
      <div id="orders-list"><div class="no-ord">Loading...</div></div>
    </div>

    <!-- PRODUCTS -->
    <div class="tpane" id="tab-products">
      <div class="pm-top">
        <div class="pm-t">Your Products</div>
        <button class="btn-ap" onclick="toggleAF()">Ôºã Add New</button>
      </div>
      <div id="pmgr-list"></div>

      <div class="af" id="addform" style="display:none">
        <div class="af-hd" id="af-title">Add New Product</div>
        <div class="fg"><label>Product Name *</label><input type="text" id="p-name" placeholder="e.g. ESP8266 Deauther v2.6.1"/></div>
        <div class="fg"><label>Category</label><input type="text" id="p-cat" placeholder="e.g. Firmware, Source Code, Template"/></div>
        <div class="fg"><label>Price (USD) *</label><input type="number" id="p-price" placeholder="40" min="0" step="0.01"/></div>
        <div class="fg"><label>Description *</label><textarea id="p-desc" placeholder="Describe the product ‚Äî what's included, how to use, etc."></textarea></div>

        <div class="flbl" style="margin-bottom:5px">Product Image</div>
        <div class="imdrop" id="imdrop" onclick="document.getElementById('img-in').click()">
          <div class="id-ico">üñº</div>
          <div class="id-l">Click to upload image</div>
          <input type="file" id="img-in" class="hin" accept="image/*" onchange="handleImg(this)"/>
        </div>
        <div style="display:flex;gap:6px;margin-bottom:10px">
          <button class="btm ghost" id="clear-img" style="display:none;font-size:0.5rem;padding:6px" onclick="clearImg()">‚úï Remove Image</button>
        </div>

        <div class="flbl" style="margin-bottom:5px">Files / Code / Binary (what buyer receives)</div>
        <div class="ci-list" id="files-list"></div>
        <button class="add-ci-btn" onclick="document.getElementById('file-in').click()">
          Ôºã Add File (code / zip / binary / any)
          <input type="file" id="file-in" class="hin" multiple onchange="handleFiles(this)"/>
        </button>

        <div class="flbl" style="margin-bottom:5px">Text Content (code snippets / keys / instructions)</div>
        <div class="ci-list" id="texts-list"></div>
        <div class="text-editor-wrap" id="text-editor-wrap" style="display:none">
          <input class="text-name-inp" id="text-name-inp" placeholder="Label for this text (e.g. License Key, Instructions)"/>
          <textarea class="text-editor" id="text-inp" placeholder="Type your text content, code, key, instructions..."></textarea>
          <div style="display:flex;gap:6px;margin-top:6px">
            <button class="btm gold" onclick="addTextContent()" style="font-size:0.52rem;padding:8px">Ôºã Add Text</button>
            <button class="btm ghost" onclick="closeTextEditor()" style="flex:0.6;font-size:0.52rem;padding:8px">Cancel</button>
          </div>
        </div>
        <button class="add-text-btn" id="open-text-btn" onclick="openTextEditor()">‚úé Add Text / Code / Key</button>

        <div class="fg"><label>Tags (comma separated)</label><input type="text" id="p-chips" placeholder="v2.6.1, ESP8266, OLED"/></div>

        <div style="display:flex;gap:6px;margin-top:4px">
          <button class="btm gold" id="save-btn" onclick="saveProduct()">üíæ SAVE</button>
          <button class="btm ghost" onclick="cancelAF()" style="flex:0.6">Cancel</button>
        </div>
        <div class="emsg" id="p-err"></div>
        <div class="smsg" id="p-ok"></div>
      </div>
    </div>

    <!-- SETTINGS -->
    <div class="tpane" id="tab-settings">
      <div class="sf">
        <div class="sf-t">Store Settings</div>
        <div class="fg"><label>Store Name</label><input type="text" id="s-name" placeholder="DigitalVault"/></div>
        <div class="fg"><label>Hero Subtitle</label><input type="text" id="s-sub2" placeholder="Professional digital products..."/></div>
        <div class="fg"><label>Telegram Link</label><input type="text" id="s-tg" placeholder="https://t.me/jellyofficer"/></div>
        <div class="fg"><label>Binance Pay ID</label><input type="text" id="s-bin" placeholder="894307667"/></div>
        <button class="btm gold" onclick="saveSettings()">üíæ SAVE SETTINGS</button>
        <div class="smsg" id="s-ok"></div>
      </div>
      <div class="dz">
        <div class="dz-t">‚ö† Danger Zone</div>
        <button class="btm red" style="margin-bottom:6px" onclick="confirmDel('orders','Delete ALL Orders?','All orders permanently removed.')">üóë Delete All Orders</button>
        <button class="btm red" onclick="confirmDel('products','Delete ALL Products?','All products permanently removed.')">üóë Delete All Products</button>
      </div>
    </div>
  </div>
</div>
</div>

<!-- ‚ïê‚ïê PAY MODAL ‚ïê‚ïê -->
<div class="modal" id="pay-modal">
  <div class="mbg" onclick="closePay()"></div>
  <div class="mbox">
    <div class="mhead">
      <button class="mclose" onclick="closePay()">‚úï</button>
      <div class="mtitle">Complete Order</div>
      <div class="msub">Fill in your details to place order</div>
      <div class="m-pname" id="m-pname"></div>
    </div>
    <div class="mbody">

      <div id="ms1">
        <div class="steps"><div class="step on">01 Details</div><div class="step">02 Done</div></div>

        <!-- Order Summary -->
        <div class="osum">
          <div class="osum-row"><span class="osl">Product</span><span id="m-prod">‚Äî</span></div>
          <div class="osum-row"><span class="osl">Price</span><span style="color:var(--gold);font-weight:700" id="m-price">‚Äî</span></div>
          <div class="osum-row"><span class="osl">Delivery</span><span>After admin approval</span></div>
        </div>

        <!-- Binance Pay ID to send -->
        <div class="bin-box">
          <div class="bin-lbl">Send Payment To ‚Äî Binance Pay ID</div>
          <div class="bin-id" id="m-bin-id">‚Äî</div>
          <button class="copy-btn" onclick="cpBin(this)">üìã Copy ID</button>
        </div>

        <!-- UID Display -->
        <div class="uid-display">
          <div class="uid-lbl">Your Order UID</div>
          <div class="uid-val" id="m-uid">0000</div>
          <div class="uid-sub">Keep this ‚Äî admin uses it to find your order</div>
        </div>

        <!-- ONLY EMAIL + TRANSACTION ID -->
        <div class="fg">
          <label>Your Email Address *</label>
          <input type="email" id="m-email" placeholder="you@example.com"/>
        </div>
        <div class="fg">
          <label>Transaction ID *</label>
          <input type="text" id="m-txid" placeholder="Binance transaction ID after payment"/>
        </div>

        <button class="btm gold" onclick="submitOrder()">üõí PLACE ORDER ‚Üí</button>
        <div class="emsg" id="m-err"></div>
      </div>

      <div id="ms2" style="display:none">
        <div class="steps"><div class="step ok">01 ‚úì</div><div class="step on">02 Done</div></div>
        <div style="text-align:center;padding:16px 0">
          <div style="font-size:2.8rem;margin-bottom:14px;animation:cs-bounce 0.6s var(--ease)">‚è≥</div>
          <div style="font-size:1.15rem;font-weight:800;color:var(--gold);margin-bottom:8px">Order Submitted!</div>
          <div style="color:var(--m2);font-size:0.73rem;line-height:2;font-weight:300;margin-bottom:14px">Your order is being reviewed by the admin.<br/>This window will close ‚Äî watch for the<br/><strong style="color:var(--gold)">Complete Order</strong> prompt.</div>
          <div style="background:rgba(168,85,247,0.08);border:1px solid rgba(168,85,247,0.2);border-radius:var(--r2);padding:10px;text-align:center">
            <div style="font-family:var(--fm);font-size:0.44rem;letter-spacing:3px;color:var(--purple);text-transform:uppercase;margin-bottom:4px">Your UID</div>
            <div style="font-size:1.4rem;font-weight:900;color:var(--purple);letter-spacing:5px" id="m-final-uid">‚Äî</div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ‚ïê‚ïê WAITING SCREEN ‚ïê‚ïê -->
<div class="wait-screen" id="wait-screen">
  <div class="wait-orb">‚è≥</div>
  <div class="wait-title">Waiting for Approval</div>
  <div class="wait-sub">Your order has been submitted. The admin will review and approve it shortly.</div>
  <div class="wait-uid-box">
    <div class="wait-uid-l">Your Order UID</div>
    <div class="wait-uid-v" id="wait-uid">‚Äî</div>
  </div>
  <div class="wait-dots">
    <div class="wait-dot"></div>
    <div class="wait-dot"></div>
    <div class="wait-dot"></div>
  </div>
  <p style="color:var(--m2);font-size:0.68rem;font-weight:300">Keep this page open ‚Äî you'll be notified when approved</p>
</div>

<!-- ‚ïê‚ïê COMPLETE SCREEN ‚ïê‚ïê -->
<div class="complete-screen" id="complete-screen">
  <div class="cs-particles" id="cs-particles"></div>
  <div class="cs-icon">‚úÖ</div>
  <div class="cs-title">Order Complete!</div>
  <div class="cs-sub">Your payment has been verified and your order is ready.<br/>Click below to access your product.</div>
  <button class="cs-btn" onclick="viewProduct()">üéâ CLICK NOW TO ACCESS</button>
</div>

<!-- ‚ïê‚ïê PRODUCT DELIVERY MODAL ‚ïê‚ïê -->
<div class="modal" id="delivery-modal">
  <div class="mbg" onclick="closeDelivery()"></div>
  <div class="mbox">
    <div class="mhead">
      <button class="mclose" onclick="closeDelivery()">‚úï</button>
      <div class="mtitle">Your Product</div>
      <div class="msub">Order verified ‚Äî here is your content</div>
    </div>
    <div class="mbody" id="delivery-content"></div>
  </div>
</div>

<!-- ‚ïê‚ïê CONFIRM ‚ïê‚ïê -->
<div class="conf" id="conf">
  <div class="mbg" onclick="closeConf()"></div>
  <div class="conf-box">
    <div class="conf-ico" id="conf-ico">‚ö†Ô∏è</div>
    <div class="conf-t" id="conf-t">Are you sure?</div>
    <div class="conf-s" id="conf-s">This cannot be undone.</div>
    <div class="conf-btns">
      <button class="cn" onclick="closeConf()">Cancel</button>
      <button class="cy" id="conf-yes" onclick="doConf()">Delete</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
const CFG={
  PASS:'3085',
  DB:'https://jhasdjhbjhdcbnwdced-default-rtdb.firebaseio.com',
};

let curProd=null, confCb=null;
let editId=null, imgB64=null, formFiles=[], formTexts=[];
let pollTimer=null, myOrderKey=null, myUID=null;
let curAcceptedOrder=null;
let settings={name:'DigitalVault',sub:'Professional digital products ‚Äî source code, firmware, templates & more.',tg:'https://t.me/jellyofficer',bin:'894307667'};

const db   = p=>`${CFG.DB}${p}.json`;
const fGet = p=>fetch(db(p)).then(r=>r.json());
const fSet = (p,d)=>fetch(db(p),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fPst = (p,d)=>fetch(db(p),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fPat = (p,d)=>fetch(db(p),{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).then(r=>r.json());
const fDel = p=>fetch(db(p),{method:'DELETE'});

function gen4UID(){
  let uid=localStorage.getItem('dv_uid');
  if(!uid){uid=String(Math.floor(1000+Math.random()*9000));localStorage.setItem('dv_uid',uid);}
  return uid;
}
const MY_UID=gen4UID();

function initParticles(){
  const c=document.getElementById('particles');
  for(let i=0;i<18;i++){
    const p=document.createElement('div');
    p.className='particle';
    const sz=Math.random()*2+1;
    const col=['#f0b429','#38bdf8','#a855f7','#22c55e'][Math.floor(Math.random()*4)];
    p.style.cssText=`width:${sz}px;height:${sz}px;background:${col};left:${Math.random()*100}%;animation-duration:${Math.random()*12+8}s;animation-delay:${Math.random()*10}s;opacity:${Math.random()*0.4+0.1}`;
    c.appendChild(p);
  }
}

function doLogin(){
  if(document.getElementById('ap').value===CFG.PASS){
    document.getElementById('admin-lock').style.display='none';
    document.getElementById('adash').classList.add('on');
    initAdmin();
  } else {
    document.getElementById('lerr').classList.add('on');
    document.getElementById('ap').value='';
    document.getElementById('ap').focus();
  }
}
function doLogout(){
  document.getElementById('admin-lock').style.display='flex';
  document.getElementById('adash').classList.remove('on');
  document.getElementById('ap').value='';
  document.getElementById('lerr').classList.remove('on');
}
function initAdmin(){loadSettings();loadOrders();loadAdminProducts();}

function stab(id,btn){
  document.querySelectorAll('.tbtn').forEach(b=>b.classList.remove('on'));
  document.querySelectorAll('.tpane').forEach(p=>p.classList.remove('on'));
  btn.classList.add('on');
  document.getElementById('tab-'+id).classList.add('on');
  if(id==='orders')loadOrders();
  if(id==='products')loadAdminProducts();
}

async function loadSettings(){
  try{
    const d=await fGet('/settings');
    if(d&&!d.error){
      settings={...settings,...d};
      applySettings();
      if(d.name)document.getElementById('s-name').value=d.name;
      if(d.sub)document.getElementById('s-sub2').value=d.sub;
      if(d.tg)document.getElementById('s-tg').value=d.tg;
      if(d.bin)document.getElementById('s-bin').value=d.bin;
    }
  }catch(e){}
}
function applySettings(){
  const el=document.getElementById('nav-logo-text');
  if(el&&settings.name){const n=settings.name;const m=Math.ceil(n.length/2);el.innerHTML=esc(n.slice(0,m))+'<span>'+esc(n.slice(m))+'</span>';}
  const sub=document.getElementById('s-sub');
  if(sub&&settings.sub)sub.textContent=settings.sub;
  document.title=(settings.name||'DigitalVault');
}
async function saveSettings(){
  const s={
    name:document.getElementById('s-name').value.trim()||settings.name,
    sub:document.getElementById('s-sub2').value.trim()||settings.sub,
    tg:document.getElementById('s-tg').value.trim()||settings.tg,
    bin:document.getElementById('s-bin').value.trim()||settings.bin,
  };
  try{await fSet('/settings',s);settings=s;applySettings();showMsg('s-ok','‚úì Saved!');toast('‚úì Settings saved','ok');}
  catch(e){toast('‚ö† '+e.message,'bad');}
}

async function loadStoreProducts(){
  const list=document.getElementById('product-list');
  try{
    const d=await fGet('/products');
    if(!d||d.error||!Object.keys(d).length){
      list.innerHTML='<div class="empty"><div class="empty-ico">üì¶</div><div class="empty-t">No products yet</div><div class="empty-s">Check back soon!</div></div>';
      document.getElementById('stat-p').textContent='0';return;
    }
    const prods=Object.entries(d).map(([id,v])=>({id,...v}));
    document.getElementById('stat-p').textContent=prods.length;
    list.innerHTML=prods.map((p,i)=>{
      const chips=(p.chips||'').split(',').filter(c=>c.trim()).map(c=>`<span class="chip">${esc(c.trim())}</span>`).join('');
      const files=(p.files||[]).map(f=>`<div class="item-row"><span class="ir-ico">${fIco(f.name)}</span><span class="ir-name">${esc(f.name)}</span><span class="ir-type">${esc(extOf(f.name))}</span></div>`).join('');
      const texts=(p.texts||[]).map(t=>`<div class="item-row"><span class="ir-ico">üìù</span><span class="ir-name">${esc(t.label||'Text')}</span><span class="ir-type">TEXT</span></div>`).join('');
      const allItems=files+texts;
      const imgHtml=p.image?`<img src="${p.image}" alt="${esc(p.name)}" loading="lazy"/><div class="img-grd"></div>`:`<div class="pc-img-ph"><div class="ph-ico">üìÅ</div><div class="ph-t">No Preview</div></div>`;
      const priceTag=p.price?`<div class="img-price"><div class="ip-v">$${esc(String(p.price))}</div><div class="ip-l">USD</div></div>`:'';
      const tgUrl=esc(settings.tg||'https://t.me/jellyofficer');
      return `<div class="pcard" style="animation-delay:${i*80}ms">
        <div class="pc-img">
          ${imgHtml}
          ${p.image?`<div class="img-bdgs"><span class="bdg bdg-g">IN STOCK</span>${p.cat?`<span class="bdg bdg-p">${esc(p.cat)}</span>`:''}</div>`:''}
          ${priceTag}
        </div>
        <div class="pc-body">
          ${p.cat?`<div class="pc-cat">${esc(p.cat)}</div>`:''}
          <div class="pc-title">${esc(p.name)}</div>
          <div class="pc-summary">${esc(p.desc||p.summary||'')}</div>
          ${chips?`<div class="pc-chips">${chips}</div>`:''}
          ${allItems?`<div class="pc-items"><div class="items-lbl">What's Included</div>${allItems}</div>`:''}
          <div class="pc-cta">
            <button class="btn-buy" onclick='openPay(${JSON.stringify({id:p.id,name:p.name,price:p.price})})'>üõí Buy ‚Äî $${esc(String(p.price||'?'))}</button>
            <a class="btn-tg-s" href="${tgUrl}" target="_blank">‚úà Telegram</a>
          </div>
        </div>
      </div>`;
    }).join('');
  }catch(e){
    list.innerHTML=`<div class="empty"><div class="empty-ico">‚ö†Ô∏è</div><div class="empty-t">Error</div><div class="empty-s">${esc(e.message)}</div></div>`;
  }
}

async function loadOrders(){
  const list=document.getElementById('orders-list');
  list.innerHTML='<div class="no-ord">Loading...</div>';
  try{
    const d=await fGet('/orders');
    const total=d&&!d.error?Object.keys(d).length:0;
    document.getElementById('stat-o').textContent=total;
    if(!d||d.error||!Object.keys(d).length){
      list.innerHTML='<div class="no-ord">No orders yet.</div>';
      setStats(0,0);return;
    }
    const orders=Object.entries(d).map(([k,v])=>({_key:k,...v})).sort((a,b)=>(b.tsMs||0)-(a.tsMs||0));
    setStats(
      orders.filter(o=>o.status==='pending').length,
      orders.filter(o=>o.status==='accepted').length
    );
    list.innerHTML=orders.map((o,i)=>{
      const dt=new Date(o.timestamp||Date.now()).toLocaleString('en-GB',{day:'2-digit',month:'short',hour:'2-digit',minute:'2-digit'});
      const statusPill={pending:'pill-p',accepted:'pill-a',sent:'pill-s'}[o.status]||'pill-p';
      const statusLabel={pending:'PENDING',accepted:'‚úì ACCEPTED',sent:'SENT'}[o.status]||'PENDING';
      const isAccepted=o.status==='accepted'||o.status==='sent';
      return `<div class="ocard ${o.status}" id="oc-${o._key}" style="animation-delay:${i*40}ms">
        <div class="o-row">
          <div class="o-num">#${orders.length-i} ¬∑ ${dt}</div>
          <span class="opill ${statusPill}">${statusLabel}</span>
        </div>
        <div class="o-user">${esc(o.email||'‚Äî')}</div>
        <div class="o-uid">UID: <span class="uid-badge">${esc(o.uid||'‚Äî')}</span></div>
        <div class="o-prod">üì¶ ${esc(o.product||'‚Äî')} ¬∑ ${esc(o.price||'‚Äî')}</div>
        ${o.txid&&o.txid!=='Not provided'?`<div class="o-bin">TX ID: ${esc(o.txid)}</div>`:'<div class="o-bin" style="color:var(--red);opacity:0.7">‚ö† No TX ID</div>'}
        <div class="o-binname" style="color:var(--m2);font-size:0.46rem">ü™ô Binance ¬∑ ${dt}</div>
        <div class="o-acts" style="margin-top:8px">
          <button class="btn-acc ${isAccepted?'accepted':''}" ${isAccepted?'disabled':''} onclick="acceptOrder('${o._key}','${esc(o.uid||'')}',this)">
            ${isAccepted?'‚úì Accepted':'‚ö° Accept Order'}
          </button>
          <button class="btn-ico del" onclick="delOrder('${o._key}')" title="Delete">‚úï</button>
        </div>
      </div>`;
    }).join('');
  }catch(e){
    list.innerHTML=`<div class="no-ord">‚ö† ${esc(e.message)}</div>`;
    setStats(0,0);
  }
}
function setStats(pg,a){
  document.getElementById('st-p').textContent=document.getElementById('stat-p').textContent;
  document.getElementById('st-pg').textContent=pg;
  document.getElementById('st-a').textContent=a;
}

async function acceptOrder(key,uid,btn){
  confirmAction('Accept Order?',`This will notify user UID: ${uid} that their order is complete.`,'‚úÖ',async()=>{
    await fPat('/orders/'+key,{status:'accepted',acceptedAt:new Date().toISOString()});
    toast('‚úì Order accepted ‚Äî user notified!','ok');
    loadOrders();
  },'Accept');
}
async function delOrder(key){
  confirmAction('Delete Order?','This order will be permanently removed.','üóë',async()=>{
    await fDel('/orders/'+key);toast('Order deleted','ok');loadOrders();
  });
}

function startPolling(orderKey){
  stopPolling();
  pollTimer=setInterval(async()=>{
    try{
      const d=await fGet('/orders/'+orderKey);
      if(d&&d.status==='accepted'){
        stopPolling();
        showCompleteScreen(d);
      }
    }catch(e){}
  },3000);
}
function stopPolling(){if(pollTimer){clearInterval(pollTimer);pollTimer=null;}}

function showCompleteScreen(orderData){
  document.getElementById('wait-screen').classList.remove('on');
  document.getElementById('pay-modal').classList.remove('on');
  launchConfetti();
  document.getElementById('complete-screen').classList.add('on');
  curAcceptedOrder=orderData;
}

function launchConfetti(){
  const c=document.getElementById('cs-particles');
  c.innerHTML='';
  const colors=['#f0b429','#22c55e','#38bdf8','#a855f7','#ff6b6b','#ffe08a'];
  for(let i=0;i<60;i++){
    const p=document.createElement('div');
    p.className='cs-p';
    const sz=Math.random()*8+3;
    p.style.cssText=`width:${sz}px;height:${sz}px;background:${colors[Math.floor(Math.random()*colors.length)]};left:${Math.random()*100}%;animation-duration:${Math.random()*3+2}s;animation-delay:${Math.random()*1}s;border-radius:${Math.random()>0.5?'50%':'2px'};`;
    c.appendChild(p);
  }
}

function viewProduct(){
  document.getElementById('complete-screen').classList.remove('on');
  if(!curAcceptedOrder)return;
  showDelivery(curAcceptedOrder);
}

async function showDelivery(order){
  const modal=document.getElementById('delivery-modal');
  const content=document.getElementById('delivery-content');
  content.innerHTML='<div style="text-align:center;padding:20px;color:var(--m2);font-family:var(--fm);font-size:0.6rem">Loading...</div>';
  modal.classList.add('on');
  try{
    const prod=order.productId?await fGet('/products/'+order.productId):null;
    let html=`<div style="margin-bottom:18px">
      <div style="font-size:1.1rem;font-weight:800;margin-bottom:5px">${esc(order.product||'Your Product')}</div>
      <div style="font-family:var(--fm);font-size:0.54rem;color:var(--green);margin-bottom:12px">‚úì Payment verified ‚Äî Order complete</div>
    </div>`;
    if(prod&&!prod.error){
      if(prod.texts&&prod.texts.length){
        prod.texts.forEach(t=>{
          html+=`<div style="margin-bottom:14px">
            <div style="font-family:var(--fm);font-size:0.5rem;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:6px">${esc(t.label||'Content')}</div>
            <pre style="background:var(--s);border:1px solid var(--b);border-radius:var(--r2);padding:12px;font-family:var(--fm);font-size:0.68rem;color:var(--t2);white-space:pre-wrap;word-break:break-all;line-height:1.7;overflow-x:auto">${esc(t.content||'')}</pre>
          </div>`;
        });
      }
      if(prod.files&&prod.files.length){
        html+=`<div style="margin-bottom:14px">
          <div style="font-family:var(--fm);font-size:0.5rem;letter-spacing:2px;color:var(--gold);text-transform:uppercase;margin-bottom:8px">Download Files</div>`;
        prod.files.forEach(f=>{
          html+=`<div style="display:flex;align-items:center;justify-content:space-between;padding:9px 12px;background:var(--s);border:1px solid var(--b);border-radius:var(--r2);margin-bottom:5px">
            <div style="display:flex;align-items:center;gap:8px">
              <span>${fIco(f.name)}</span>
              <span style="font-family:var(--fm);font-size:0.62rem;color:var(--t2)">${esc(f.name)}</span>
            </div>
            <a href="${f.base64}" download="${esc(f.name)}" style="background:var(--gold);color:#06060a;font-family:var(--fm);font-size:0.5rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:5px 12px;border-radius:var(--r3);text-decoration:none">‚¨á Download</a>
          </div>`;
        });
        html+='</div>';
      }
      if((!prod.texts||!prod.texts.length)&&(!prod.files||!prod.files.length)){
        html+=`<p style="color:var(--m2);font-size:0.75rem;line-height:1.9;font-weight:300">${esc(prod.desc||prod.summary||'Your order is complete. Contact admin for delivery.')}</p>`;
      }
    } else {
      html+=`<p style="color:var(--m2);font-size:0.75rem;line-height:1.9;font-weight:300">Your order is confirmed! Contact admin for file delivery.</p>`;
    }
    content.innerHTML=html;
  }catch(e){
    content.innerHTML=`<p style="color:var(--m2);font-size:0.75rem">Your order is confirmed! Contact admin for delivery.</p>`;
  }
}

function closeDelivery(){document.getElementById('delivery-modal').classList.remove('on');}

async function loadAdminProducts(){
  const list=document.getElementById('pmgr-list');
  try{
    const d=await fGet('/products');
    if(!d||d.error||!Object.keys(d).length){list.innerHTML='<div class="no-ord">No products. Add one.</div>';document.getElementById('st-p').textContent='0';return;}
    const prods=Object.entries(d).map(([id,v])=>({id,...v}));
    document.getElementById('st-p').textContent=prods.length;
    list.innerHTML=prods.map((p,i)=>{
      const th=p.image?`<div class="pm-thumb"><img src="${p.image}" alt="${esc(p.name)}"/></div>`:`<div class="pm-thumb">üì¶</div>`;
      const fc=(p.files||[]).length+(p.texts||[]).length;
      return `<div class="pm-item" style="animation-delay:${i*40}ms">
        ${th}
        <div class="pm-info">
          <div class="pm-name">${esc(p.name)}</div>
          <div class="pm-meta"><span class="pm-price">$${esc(String(p.price||0))}</span>${p.cat?' ¬∑ '+esc(p.cat):''}${fc?' ¬∑ '+fc+' item'+(fc>1?'s':''):''}</div>
        </div>
        <div class="pm-acts">
          <button class="btn-ico" onclick="editProduct('${p.id}')" title="Edit">‚úèÔ∏è</button>
          <button class="btn-ico del" onclick="delProd('${p.id}')" title="Delete">‚úï</button>
        </div>
      </div>`;
    }).join('');
  }catch(e){list.innerHTML=`<div class="no-ord">‚ö† ${esc(e.message)}</div>`;}
}

function toggleAF(){
  editId=null;imgB64=null;formFiles=[];formTexts=[];
  const f=document.getElementById('addform');
  const showing=f.style.display!=='none';
  f.style.display=showing?'none':'block';
  if(!showing){
    document.getElementById('af-title').textContent='Add New Product';
    document.getElementById('save-btn').textContent='üíæ SAVE';
    clearAF();
    setTimeout(()=>document.getElementById('tab-products').scrollTo({top:9999,behavior:'smooth'}),50);
  }
}
function clearAF(){
  ['p-name','p-cat','p-price','p-desc','p-chips'].forEach(id=>{const el=document.getElementById(id);if(el)el.value='';});
  imgB64=null;formFiles=[];formTexts=[];
  renderImgPrev();renderFilesUI();renderTextsUI();
  closeTextEditor();
  document.getElementById('p-err').classList.remove('on');
  document.getElementById('p-ok').classList.remove('on');
}
async function editProduct(id){
  try{
    const d=await fGet('/products/'+id);
    editId=id;imgB64=d.image||null;formFiles=d.files||[];formTexts=d.texts||[];
    document.getElementById('p-name').value=d.name||'';
    document.getElementById('p-cat').value=d.cat||'';
    document.getElementById('p-price').value=d.price||'';
    document.getElementById('p-desc').value=d.desc||d.summary||'';
    document.getElementById('p-chips').value=d.chips||'';
    document.getElementById('af-title').textContent='Edit Product';
    document.getElementById('save-btn').textContent='üíæ UPDATE';
    document.getElementById('addform').style.display='block';
    renderImgPrev();renderFilesUI();renderTextsUI();
    setTimeout(()=>document.getElementById('tab-products').scrollTo({top:9999,behavior:'smooth'}),50);
  }catch(e){toast('‚ö† Load failed','bad');}
}
async function saveProduct(){
  const name=document.getElementById('p-name').value.trim();
  const price=document.getElementById('p-price').value.trim();
  const err=document.getElementById('p-err');
  const btn=document.getElementById('save-btn');
  if(!name||!price){err.textContent='‚ö† Name and price required.';err.classList.add('on');return;}
  err.classList.remove('on');btn.disabled=true;btn.textContent='Saving...';
  const prod={
    name,price:parseFloat(price),
    cat:document.getElementById('p-cat').value.trim(),
    desc:document.getElementById('p-desc').value.trim(),
    chips:document.getElementById('p-chips').value.trim(),
    image:imgB64||null,
    files:formFiles,
    texts:formTexts,
    updatedAt:new Date().toISOString(),
  };
  try{
    if(editId){await fPat('/products/'+editId,prod);}
    else{prod.createdAt=new Date().toISOString();await fPst('/products',prod);}
    btn.disabled=false;btn.textContent=editId?'üíæ UPDATE':'üíæ SAVE';
    showMsg('p-ok',editId?'‚úì Updated!':'‚úì Added!');
    toast(editId?'‚úì Product updated':'‚úì Product added','ok');
    clearAF();editId=null;
    document.getElementById('addform').style.display='none';
    loadAdminProducts();loadStoreProducts();
  }catch(e){
    btn.disabled=false;btn.textContent=editId?'üíæ UPDATE':'üíæ SAVE';
    err.textContent='‚ö† Error: '+e.message;err.classList.add('on');
  }
}
function cancelAF(){document.getElementById('addform').style.display='none';clearAF();editId=null;}

async function delProd(id){
  confirmAction('Delete Product?','This product will be removed from the store.','üóë',async()=>{
    await fDel('/products/'+id);toast('Product deleted','ok');loadAdminProducts();loadStoreProducts();
  });
}

function handleImg(input){
  const f=input.files[0];if(!f)return;
  const r=new FileReader();r.onload=e=>{imgB64=e.target.result;renderImgPrev();};
  r.readAsDataURL(f);
}
function clearImg(){imgB64=null;renderImgPrev();}
function renderImgPrev(){
  const z=document.getElementById('imdrop');
  z.querySelectorAll('.prev-img').forEach(el=>el.remove());
  const btn=document.getElementById('clear-img');
  if(imgB64){
    const img=document.createElement('img');img.src=imgB64;img.className='prev-img';z.appendChild(img);
    z.querySelector('.id-ico').style.display='none';z.querySelector('.id-l').style.display='none';btn.style.display='';
  }else{
    z.querySelector('.id-ico').style.display='';z.querySelector('.id-l').style.display='';btn.style.display='none';
  }
}

function handleFiles(input){
  Array.from(input.files).forEach(file=>{
    const r=new FileReader();
    r.onload=e=>{formFiles.push({name:file.name,size:file.size,base64:e.target.result});renderFilesUI();};
    r.readAsDataURL(file);
  });
  input.value='';
}
function renderFilesUI(){
  const list=document.getElementById('files-list');
  if(!formFiles.length){list.innerHTML='';return;}
  list.innerHTML=formFiles.map((f,i)=>`
    <div class="ci-item">
      <span>${fIco(f.name)}</span>
      <span class="ci-name">${esc(f.name)}</span>
      <span class="ci-type">${esc(extOf(f.name))}</span>
      <button class="ci-del" onclick="rmFile(${i})">‚úï</button>
    </div>`).join('');
}
function rmFile(i){formFiles.splice(i,1);renderFilesUI();}

function openTextEditor(){
  document.getElementById('text-editor-wrap').style.display='block';
  document.getElementById('open-text-btn').style.display='none';
  document.getElementById('text-inp').value='';
  document.getElementById('text-name-inp').value='';
}
function closeTextEditor(){
  document.getElementById('text-editor-wrap').style.display='none';
  document.getElementById('open-text-btn').style.display='';
}
function addTextContent(){
  const label=document.getElementById('text-name-inp').value.trim()||'Content';
  const content=document.getElementById('text-inp').value.trim();
  if(!content)return;
  formTexts.push({label,content});
  renderTextsUI();closeTextEditor();toast('‚úì Text added','ok');
}
function renderTextsUI(){
  const list=document.getElementById('texts-list');
  if(!formTexts.length){list.innerHTML='';return;}
  list.innerHTML=formTexts.map((t,i)=>`
    <div class="ci-item">
      <span>üìù</span>
      <span class="ci-name">${esc(t.label)}</span>
      <span class="ci-type">TEXT</span>
      <button class="ci-del" onclick="rmText(${i})">‚úï</button>
    </div>`).join('');
}
function rmText(i){formTexts.splice(i,1);renderTextsUI();}

/* ‚îÄ‚îÄ‚îÄ PAY MODAL ‚îÄ‚îÄ‚îÄ */
function openPay(prod){
  curProd=prod;
  myUID=MY_UID;
  document.getElementById('m-pname').textContent=prod.name;
  document.getElementById('m-prod').textContent=prod.name;
  document.getElementById('m-price').textContent='$'+prod.price+' USD';
  document.getElementById('m-bin-id').textContent=settings.bin||'894307667';
  document.getElementById('m-uid').textContent=myUID;
  document.getElementById('m-final-uid').textContent=myUID;
  // Clear fields
  document.getElementById('m-email').value='';
  document.getElementById('m-txid').value='';
  document.getElementById('m-err').classList.remove('on');
  // Show step 1
  document.getElementById('ms1').style.display='block';
  document.getElementById('ms2').style.display='none';
  document.getElementById('pay-modal').classList.add('on');
}
function closePay(){document.getElementById('pay-modal').classList.remove('on');}

function cpBin(btn){
  const v=settings.bin||'894307667';
  navigator.clipboard.writeText(v).catch(()=>{const t=document.createElement('textarea');t.value=v;document.body.appendChild(t);t.select();document.execCommand('copy');t.remove();});
  btn.textContent='‚úì Copied!';setTimeout(()=>btn.textContent='üìã Copy ID',2000);
}

async function submitOrder(){
  const errEl=document.getElementById('m-err');
  const btn=document.querySelector('#ms1 .btm.gold');
  const email=(document.getElementById('m-email').value||'').trim();
  const txid=(document.getElementById('m-txid').value||'').trim();

  // Validation
  if(!email){errEl.textContent='‚ö† Email address is required.';errEl.classList.add('on');return;}
  if(!email.includes('@')||!email.includes('.')){errEl.textContent='‚ö† Please enter a valid email address.';errEl.classList.add('on');return;}
  if(!txid){errEl.textContent='‚ö† Transaction ID is required.';errEl.classList.add('on');return;}

  errEl.classList.remove('on');
  btn.disabled=true;btn.textContent='Saving...';

  const order={
    id:'ORD-'+Date.now(),
    uid:myUID,
    email,
    txid,
    product:curProd?.name||'‚Äî',
    productId:curProd?.id||null,
    price:curProd?.price?'$'+curProd.price:'‚Äî',
    payMethod:'binance',
    status:'pending',
    timestamp:new Date().toISOString(),
    tsMs:Date.now(),
  };

  try{
    const r=await fPst('/orders',order);
    if(r&&r.error)throw new Error(r.error);
    myOrderKey=r.name;
    btn.disabled=false;btn.textContent='üõí PLACE ORDER ‚Üí';
    // Show success step
    document.getElementById('ms1').style.display='none';
    document.getElementById('ms2').style.display='block';
    // Close and show waiting
    setTimeout(()=>{
      closePay();
      document.getElementById('wait-uid').textContent=myUID;
      document.getElementById('wait-screen').classList.add('on');
      startPolling(myOrderKey);
    },2000);
    if(document.getElementById('adash').classList.contains('on'))loadOrders();
  }catch(e){
    btn.disabled=false;btn.textContent='üõí PLACE ORDER ‚Üí';
    errEl.textContent='‚ö† Error: '+e.message;errEl.classList.add('on');
  }
}

async function confirmDel(type,title,sub){
  confirmAction(title,sub,'‚ö†Ô∏è',async()=>{
    await fDel('/'+type);
    toast('All '+type+' deleted','ok');
    if(type==='orders'){loadOrders();}else{loadAdminProducts();loadStoreProducts();}
  },'Delete All');
}

function confirmAction(title,sub,icon,cb,yesLbl='Delete'){
  confCb=cb;
  document.getElementById('conf-t').textContent=title;
  document.getElementById('conf-s').textContent=sub;
  document.getElementById('conf-ico').textContent=icon;
  document.getElementById('conf-yes').textContent=yesLbl;
  document.getElementById('conf').classList.add('on');
}
function closeConf(){document.getElementById('conf').classList.remove('on');confCb=null;}
async function doConf(){closeConf();if(confCb)await confCb();}

let _tt;
function toast(msg,type=''){
  const t=document.getElementById('toast');
  t.textContent=msg;t.className='toast on '+(type||'');
  clearTimeout(_tt);_tt=setTimeout(()=>t.className='toast',3200);
}

function fIco(name){
  if(!name)return'üìÑ';const e=extOf(name).toLowerCase();
  if(['zip','rar','7z','tar','gz'].includes(e))return'üóú';if(e==='pdf')return'üìï';
  if(['png','jpg','jpeg','gif','webp','svg'].includes(e))return'üñº';if(['bin','hex','elf','fw'].includes(e))return'‚öô';
  if(['js','ts','jsx','tsx','vue'].includes(e))return'üåê';if(['html','css','scss','sass'].includes(e))return'üé®';
  if(['py','rb','go','rs','c','cpp','h'].includes(e))return'üêç';if(['sh','bat','cmd','ps1'].includes(e))return'‚ö°';
  if(['json','yaml','yml','toml','env'].includes(e))return'üìã';if(['md','txt','doc','docx'].includes(e))return'üìù';
  return'üìÑ';
}
function extOf(n){return(n||'').split('.').pop();}
function esc(s){return(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function showMsg(id,msg){const el=document.getElementById(id);if(!el)return;el.textContent=msg;el.classList.add('on');setTimeout(()=>el.classList.remove('on'),3500);}

document.addEventListener('keydown',e=>{if(e.key==='Escape'){closePay();closeConf();closeDelivery();}});

initParticles();
(async()=>{await loadSettings();await loadStoreProducts();})();
</script>
</body>
</html>
